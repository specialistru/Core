–û—Ç–ª–∏—á–Ω–æ! –í–æ—Ç –ø–æ–ª–Ω—ã–π –ø—Ä–æ–µ–∫—Ç —Å –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π, –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –≥—Ä–∞—Ñ–∞, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π `clang-tidy`, `cppcheck` –∏ —à–∞–±–ª–æ–Ω–∞–º–∏ –¥–ª—è C23 —Ç–µ—Å—Ç–æ–≤.

---

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/c23_codegen_pro/
‚îú‚îÄ‚îÄ config.json
‚îú‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ config_loader.py
‚îú‚îÄ‚îÄ code_generator.py
‚îú‚îÄ‚îÄ filesystem_writer.py
‚îú‚îÄ‚îÄ archiver.py
‚îú‚îÄ‚îÄ validator.py
‚îú‚îÄ‚îÄ dependency_graph.py
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îú‚îÄ‚îÄ test_template.c
‚îÇ   ‚îî‚îÄ‚îÄ test_template.h
‚îî‚îÄ‚îÄ README.md
```

---

# 1. config.json

```json
{
  "project_id": "saphana_grade_final",
  "language": "C23",
  "output_path": {
    "src": "J:/RDBMS/src",
    "include": "J:/RDBMS/include"
  },
  "entry_block": "0.1",
  "blocks": [
    {
      "block_id": "0.1",
      "module": "TransactionManager",
      "depends_on": [],
      "requirements": [
        "–ø–æ–¥–¥–µ—Ä–∂–∫–∞ MVCC",
        "–Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –ø–∞–º—è—Ç–∏",
        "–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ª–æ–≥ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π"
      ]
    },
    {
      "block_id": "0.2",
      "module": "StorageManager",
      "depends_on": ["TransactionManager"],
      "requirements": [
        "—Ä–∞–±–æ—Ç–∞ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏",
        "–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ª–æ–≥–æ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π",
        "LRU-–∫–µ—à –∏ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è"
      ]
    }
  ]
}
```

---

# 2. main.py

```python
from config_loader import load_config, resolve_dependencies
from code_generator import generate_code
from filesystem_writer import write_files
from archiver import archive_project
from validator import validate_module
from dependency_graph import export_dependency_graph

def main():
    config = load_config("config.json")
    blocks = resolve_dependencies(config)

    for block in blocks:
        print(f"üß© –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–æ–¥—É–ª—è {block['module']} (ID: {block['block_id']})")
        c_code, h_code = generate_code(block)
        write_files(block, c_code, h_code, config["output_path"])
        validate_module(block, config["output_path"])

    export_dependency_graph(blocks)
    archive_project(config["output_path"])
    print("‚úÖ –ü—Ä–æ–µ–∫—Ç –∑–∞–≤–µ—Ä—à—ë–Ω –∏ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω. –ì—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å–æ—Ö—Ä–∞–Ω—ë–Ω –∫–∞–∫ 'dependency_graph.dot' –∏ 'graph.png'.")

if __name__ == "__main__":
    main()
```

---

# 3. config\_loader.py

```python
import json

def load_config(path):
    with open(path, "r", encoding="utf-8") as f:
        return json.load(f)

def resolve_dependencies(config):
    block_map = {b["block_id"]: b for b in config["blocks"]}
    resolved = []
    visited = set()

    def visit(block_id):
        if block_id in visited:
            return
        block = block_map[block_id]
        for dep in block.get("depends_on", []):
            visit(dep)
        resolved.append(block)
        visited.add(block_id)

    entry = config.get("entry_block", config["blocks"][0]["block_id"])
    visit(entry)
    return resolved
```

---

# 4. code\_generator.py

```python
def generate_code(block):
    # –ü—Ä–æ—Å—Ç–æ–π —à–∞–±–ª–æ–Ω –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞ –Ω–∞ C23 —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
    module = block["module"]
    reqs = block.get("requirements", [])

    header = f"""\
#ifndef {module.upper()}_H
#define {module.upper()}_H

// –ú–æ–¥—É–ª—å: {module}
// –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
// {chr(10).join(['// - ' + r for r in reqs])}

void init_{module.lower()}();
void shutdown_{module.lower()}();

#endif // {module.upper()}_H
"""

    source = f"""\
#include "{module}.h"
#include <stdio.h>

void init_{module.lower()}() {{
    // TODO: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è {module}
    printf("–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è {module}\\n");
}}

void shutdown_{module.lower()}() {{
    // TODO: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –º–æ–¥—É–ª—è {module}
    printf("–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã {module}\\n");
}}
"""

    return source, header
```

---

# 5. filesystem\_writer.py

```python
import os

def write_files(block, c_code, h_code, output_path):
    src_dir = output_path["src"]
    include_dir = output_path["include"]

    os.makedirs(src_dir, exist_ok=True)
    os.makedirs(include_dir, exist_ok=True)

    c_path = os.path.join(src_dir, f"{block['module']}.c")
    h_path = os.path.join(include_dir, f"{block['module']}.h")

    with open(c_path, "w", encoding="utf-8") as f:
        f.write(c_code)

    with open(h_path, "w", encoding="utf-8") as f:
        f.write(h_code)

    print(f"üìÅ –ó–∞–ø–∏—Å–∞–Ω—ã —Ñ–∞–π–ª—ã: {c_path}, {h_path}")
```

---

# 6. archiver.py

```python
import shutil
import os

def archive_project(output_path):
    archive_name = "project_archive"
    src_dir = output_path["src"]
    include_dir = output_path["include"]

    shutil.make_archive(archive_name, 'zip', root_dir=os.path.commonpath([src_dir, include_dir]))
    print(f"üóú –ê—Ä—Ö–∏–≤ —Å–æ–∑–¥–∞–Ω: {archive_name}.zip")
```

---

# 7. validator.py

```python
import subprocess
import os

def validate_module(block, output_path):
    src_file = os.path.join(output_path["src"], f"{block['module']}.c")
    include_dir = output_path["include"]

    print(f"üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ {block['module']}...")

    try:
        subprocess.run(
            ["gcc", "-std=c2x", "-Wall", "-Wextra", "-c", src_file, "-I", include_dir],
            check=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE
        )
        print(f"‚úÖ {block['module']} –ø—Ä–æ—à—ë–ª –∫–æ–º–ø–∏–ª—è—Ü–∏—é.")
    except subprocess.CalledProcessError as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –≤ {block['module']}:")
        print(e.stderr.decode())

    # –ó–∞–ø—É—Å–∫ clang-tidy
    try:
        result = subprocess.run(
            ["clang-tidy", src_file, "--", "-std=c2x", f"-I{include_dir}"],
            check=False, stdout=subprocess.PIPE, stderr=subprocess.PIPE
        )
        print(f"üîç clang-tidy —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è {block['module']}:\n{result.stdout.decode()}")
    except FileNotFoundError:
        print("‚ö†Ô∏è clang-tidy –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ PATH.")

    # –ó–∞–ø—É—Å–∫ cppcheck
    try:
        subprocess.run(
            ["cppcheck", "--std=c23", "--enable=warning,style", src_file, os.path.join(include_dir, f"{block['module']}.h")],
            check=False
        )
    except FileNotFoundError:
        print("‚ö†Ô∏è cppcheck –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ PATH.")
```

---

# 8. dependency\_graph.py

```python
import os
import subprocess

def export_dependency_graph(blocks, output_dot="dependency_graph.dot", output_png="graph.png"):
    with open(output_dot, "w", encoding="utf-8") as f:
        f.write("digraph dependencies {\n")
        for block in blocks:
            for dep in block.get("depends_on", []):
                f.write(f'  "{dep}" -> "{block["block_id"]}";\n')
        f.write("}\n")

    print(f"üìä –§–∞–π–ª –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å–æ—Ö—Ä–∞–Ω—ë–Ω: {output_dot}")

    try:
        subprocess.run(["dot", "-Tpng", output_dot, "-o", output_png], check=True)
        print(f"üìä –ì—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω: {output_png}")
    except FileNotFoundError:
        print("‚ö†Ô∏è Graphviz (dot) –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ PATH.")
    except subprocess.CalledProcessError:
        print("‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.")
```

---

# 9. templates/test\_template.c

```c
#include <stdio.h>
#include <assert.h>
#include "{module}.h"

void test_init_shutdown() {
    init_{module_lower}();
    shutdown_{module_lower}();
    printf("–¢–µ—Å—Ç—ã –¥–ª—è –º–æ–¥—É–ª—è {module} –ø—Ä–æ–π–¥–µ–Ω—ã\\n");
}

int main() {
    test_init_shutdown();
    return 0;
}
```

---

# 10. templates/test\_template.h

```c
#ifndef TEST_{MODULE}_H
#define TEST_{MODULE}_H

void test_init_shutdown();

#endif // TEST_{MODULE}_H
```

---

# 11. README.md (–∫—Ä–∞—Ç–∫–æ)

````markdown
# –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–¥–∞ C23 —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

## –û–ø–∏—Å–∞–Ω–∏–µ
–ü—Ä–æ–µ–∫—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–æ–¥—É–ª–∏ –Ω–∞ C23 –ø–æ –±–ª–æ–∫–∞–º —Å —É—á—ë—Ç–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥, —Å–æ–∑–¥–∞–µ—Ç –∞—Ä—Ö–∏–≤ –∏ –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

## –ó–∞–ø—É—Å–∫
```bash
python main.py
````

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

* Python 3.8+
* gcc –∏–ª–∏ clang —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π C23
* clang-tidy (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
* cppcheck (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
* Graphviz (dot) –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≥—Ä–∞—Ñ–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

* config.json ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏ –±–ª–æ–∫–æ–≤
* src/, include/ ‚Äî –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏
* templates/ ‚Äî —à–∞–±–ª–æ–Ω—ã —Ç–µ—Å—Ç–æ–≤

```

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–≥—É –ø–æ–º–æ—á—å —Å –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º **CLI-—É—Ç–∏–ª–∏—Ç—ã** –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –±–ª–æ–∫–æ–≤ –∏–ª–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–µ—Å—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∞–±–ª–æ–Ω–æ–≤.

---

**–ì–æ—Ç–æ–≤ –ø–æ–º–æ—á—å —Å —á–µ–º —É–≥–æ–¥–Ω–æ, –ø—Ä–æ—Å—Ç–æ —Å–∫–∞–∂–∏!**
```
