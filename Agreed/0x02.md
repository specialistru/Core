–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.1 MVCC: Compressed Chains + Snapshot Isolation]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `mvcc_snapshot`

> ‚úÖ –ë–ª–æ–∫ —Ä–µ–∞–ª–∏–∑—É–µ—Ç **–º–Ω–æ–≥–æ–≤–µ—Ä—Å–∏–æ–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (MVCC)** —Å **—Å–∂–∞—Ç—ã–º–∏ —Ü–µ–ø–æ—á–∫–∞–º–∏ –≤–µ—Ä—Å–∏–π** –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π **Snapshot Isolation**:
> ‚Äî –ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å —Å–æ–¥–µ—Ä–∂–∏—Ç —Ü–µ–ø–æ—á–∫—É –≤–µ—Ä—Å–∏–π `mvcc_chain_entry_t`
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `tx_id`, `begin_ts`, `end_ts`, `visibility`
> ‚Äî –ò–∑–æ–ª—è—Ü–∏—è —Å–Ω–∏–º–∫–æ–≤: –∫–∞–∂–¥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤–∏–¥–∏—Ç snapshot –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –º–æ–º–µ–Ω—Ç —Å—Ç–∞—Ä—Ç–∞
> ‚Äî –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π —á–µ—Ä–µ–∑ —Ñ–æ–Ω–æ–≤—ã–π GC
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å WAL, –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º, recovery

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                | ID –±–ª–æ–∫–∞        | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                           | ID –±–ª–æ–∫–∞            | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                                 |
| - | -------------------------------- | --------------- | ------------------------------------------- | ------------------- | ----------------------------------------------------------- |
| 1 | \[2.1 MVCC / Snapshot Isolation] | `mvcc_snapshot` | ‚Üí \[2.2 Transaction Table / Version Chains] | `tx_table`          | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–∫—É—â–∏–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ –∏ TID         |
| 2 | \[2.1 MVCC / Snapshot Isolation] | `mvcc_snapshot` | ‚Üí \[2.5 Garbage Collection / Vacuum]        | `vacuum_engine`     | –°—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ —É–¥–∞–ª—è—é—Ç—Å—è –≤ —Ñ–æ–Ω–µ –ø–æ snapshot visibility       |
| 3 | \[2.1 MVCC / Snapshot Isolation] | `mvcc_snapshot` | ‚Üí \[2.8 Snapshot / WAL / Recovery]          | `wal_snapshot`      | –°–Ω–∏–º–∫–∏ –∏ WAL-–ª–æ–≥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å MVCC                   |
| 4 | \[2.1 MVCC / Snapshot Isolation] | `mvcc_snapshot` | ‚Üí \[5.1 Executor / Vectorized Execution]    | `parallel_executor` | MVCC-–≤–∏–¥–∏–º–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏ —á—Ç–µ–Ω–∏–∏ —Å—Ç—Ä–æ–∫ |
| 5 | \[3.2 Optimizer: Cost-based]     | `sql_optimizer` | ‚Üê \[2.1 MVCC / Snapshot Isolation]          | `mvcc_snapshot`     | –£—á–µ—Ç MVCC-–≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ –ø–ª–∞–Ω–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤          |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                         | ID –±–ª–æ–∫–∞             | ‚Üí –ö—É–¥–∞ (`[2.1 MVCC / Snapshot Isolation]`) | ID –±–ª–æ–∫–∞        | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                    |
| - | ----------------------------------------- | -------------------- | ------------------------------------------ | --------------- | ---------------------------------------------- |
| 1 | \[0.5 –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞–ø—É—Å–∫–∞]                 | `startup_controller` | ‚Üí \[2.1 MVCC / Snapshot Isolation]         | `mvcc_snapshot` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ö–∞–Ω–∏–∑–º–∞ snapshot visibility    |
| 2 | \[2.2 Transaction Table / Version Chains] | `tx_table`           | ‚Üí \[2.1 MVCC / Snapshot Isolation]         | `mvcc_snapshot` | –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π    |
| 3 | \[1.45 System Versioning / AS OF]         | `system_versioning`  | ‚Üí \[2.1 MVCC / Snapshot Isolation]         | `mvcc_snapshot` | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–∏–¥–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ AS OF  |
| 4 | \[2.7 Transaction Manager / Multi-node]   | `tx_manager`         | ‚Üí \[2.1 MVCC / Snapshot Isolation]         | `mvcc_snapshot` | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç snapshot —Ç–µ–∫—É—â–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏         |
| 5 | \[10.1 Unit-—Ç–µ—Å—Ç—ã / MVCC + Snapshot]      | `unit_test_engine`   | ‚Üí \[2.1 MVCC / Snapshot Isolation]         | `mvcc_snapshot` | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∏ —Ü–µ–ø–æ—á–µ–∫ –≤–µ—Ä—Å–∏–π |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ MVCC**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å chain-based —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.
* **–ò–Ω–∂–µ–Ω–µ—Ä –ø–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º**: –æ—Ç–º–µ—Ç–∏–ª –ø–æ–¥–¥–µ—Ä–∂–∫—É snapshot isolation + serializable fallback.
* **–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å–≤—è–∑–∫—É —Å WAL/snapshot.
* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏**: —É–∫–∞–∑–∞–ª –Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å lock-free –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç–∏.
* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ garbage collector**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å chain cleanup.

---

‚úÖ –ë–ª–æ–∫ \[2.1] (`mvcc_snapshot`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É: **\[2.2 –¢–∞–±–ª–∏—Ü–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ —Ü–µ–ø–æ—á–∫–∏ –≤–µ—Ä—Å–∏–π]** (`tx_table`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.2 –¢–∞–±–ª–∏—Ü–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ —Ü–µ–ø–æ—á–∫–∏ –≤–µ—Ä—Å–∏–π]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `tx_table`

> ‚úÖ –ë–ª–æ–∫ —Ä–µ–∞–ª–∏–∑—É–µ—Ç **—Ç–∞–±–ª–∏—Ü—É –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ (`active`, `committed`, `aborted`) –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **—Ü–µ–ø–æ—á–∫–∏ –≤–µ—Ä—Å–∏–π –∑–∞–ø–∏—Å–µ–π**:
> ‚Äî –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `tx_table_entry_t` —Å `tx_id`, `status`, `begin_ts`, `commit_ts`
> ‚Äî –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å—Ç–∞—Ç—É—Å—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MVCC, WAL, Snapshot
> ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º: begin ‚Üí commit/abort
> ‚Äî –°–≤—è–∑—å —Å GC –¥–ª—è unlink –≤–µ—Ä—Å–∏–π –ø–æ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)           | ID –±–ª–æ–∫–∞         | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                    | ID –±–ª–æ–∫–∞           | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                             |
| - | --------------------------- | ---------------- | ------------------------------------ | ------------------ | ------------------------------------------------------- |
| 1 | \[2.2 Transaction Table]    | `tx_table`       | ‚Üí \[2.1 MVCC / Snapshot Isolation]   | `mvcc_snapshot`    | –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏  |
| 2 | \[2.2 Transaction Table]    | `tx_table`       | ‚Üí \[2.3 Write-Ahead Logging (WAL)]   | `wal_engine`       | –ö–æ–º–º–∏—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç WAL entry                  |
| 3 | \[2.2 Transaction Table]    | `tx_table`       | ‚Üí \[2.4 Snapshot Manager]            | `snapshot_manager` | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è snapshot‚Äô–æ–≤                 |
| 4 | \[2.2 Transaction Table]    | `tx_table`       | ‚Üí \[2.5 Garbage Collection / Vacuum] | `vacuum_engine`    | GC —É–¥–∞–ª—è–µ—Ç –≤–µ—Ä—Å–∏–∏ –ø–æ —Å—Ç–∞—Ç—É—Å—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏                 |
| 5 | \[7.1 –ú–µ—Ç—Ä–∏–∫–∏ / Monitoring] | `metrics_engine` | ‚Üê \[2.2 Transaction Table]           | `tx_table`         | –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∞–∫—Ç–∏–≤–Ω—ã—Ö / –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                        | ID –±–ª–æ–∫–∞             | ‚Üí –ö—É–¥–∞ (`[2.2 Transaction Table]`) | ID –±–ª–æ–∫–∞   | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                   |
| - | ---------------------------------------- | -------------------- | ---------------------------------- | ---------- | --------------------------------------------- |
| 1 | \[0.5 –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞–ø—É—Å–∫–∞]                | `startup_controller` | ‚Üí \[2.2 Transaction Table]         | `tx_table` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π              |
| 2 | \[2.1 MVCC / Snapshot Isolation]         | `mvcc_snapshot`      | ‚Üí \[2.2 Transaction Table]         | `tx_table` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –≤–µ—Ä—Å–∏–π      |
| 3 | \[2.6 Isolation Levels: RC/RR/SI/SERIAL] | `isolation_levels`   | ‚Üí \[2.2 Transaction Table]         | `tx_table` | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏              |
| 4 | \[5.1 Executor / Vectorized Execution]   | `parallel_executor`  | ‚Üí \[2.2 Transaction Table]         | `tx_table` | –ü–æ–ª—É—á–µ–Ω–∏–µ snapshot‚Äôa –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π  |
| 5 | \[10.1 Unit-—Ç–µ—Å—Ç—ã / MVCC + Snapshot]     | `unit_test_engine`   | ‚Üí \[2.2 Transaction Table]         | `tx_table` | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–ò–Ω–∂–µ–Ω–µ—Ä –ø–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –º–æ–¥–µ–ª—å `tx_id ‚Üí state`, —Å–æ–≤–º–µ—Å—Ç–∏–º—É—é —Å SI –∏ SERIALIZABLE.
* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ WAL**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª —Ç—Ä–∏–≥–≥–µ—Ä –∫–æ–º–º–∏—Ç–∞ –∏–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã.
* **–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª role tx\_table –≤ recovery pipeline.
* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ GC**: —É–∫–∞–∑–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å–≤—è–∑—å GC ‚Üî tx\_status.
* **–ò–Ω–∂–µ–Ω–µ—Ä –ø–æ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç–∏**: –¥–æ–±–∞–≤–∏–ª –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å—á—ë—Ç—á–∏–∫–æ–≤ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.

---

‚úÖ –ë–ª–æ–∫ \[2.2] (`tx_table`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É: **\[2.3 Write-Ahead Logging (WAL)]** (`wal_engine`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.3 Write-Ahead Logging (WAL)]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `wal_engine`

> ‚úÖ –ë–ª–æ–∫ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º **–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∂—É—Ä–Ω–∞–ª–∏—Ä–æ–≤–∞–Ω–∏—è (WAL)**:
> ‚Äî –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ WAL –¥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤ –ø–∞–º—è—Ç–∏
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **diff-based –ª–æ–≥–æ–≤**, log compaction
> ‚Äî –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å WAL –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ç–æ–∫–æ–≤
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å snapshot‚Äô–∞–º–∏, MVCC, recovery
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **durability** (fsync), WAL-—Å–µ–≥–º–µ–Ω—Ç–æ–≤ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)         | ID –±–ª–æ–∫–∞           | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                         | ID –±–ª–æ–∫–∞         | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                            |
| - | ------------------------- | ------------------ | ----------------------------------------- | ---------------- | ------------------------------------------------------ |
| 1 | \[2.3 WAL Engine]         | `wal_engine`       | ‚Üí \[2.8 Snapshot / Recovery Engine]       | `wal_snapshot`   | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ snapshot‚Äô–æ–≤ –∏ recovery     |
| 2 | \[2.3 WAL Engine]         | `wal_engine`       | ‚Üí \[2.7 Transaction Manager / Multi-node] | `tx_manager`     | –ò–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ—Å–ª–µ –∑–∞–ø–∏—Å–∏ WAL   |
| 3 | \[2.3 WAL Engine]         | `wal_engine`       | ‚Üí \[7.1 –ú–µ—Ç—Ä–∏–∫–∏ / Monitoring / Alerts]    | `metrics_engine` | –ú–µ—Ç—Ä–∏–∫–∏ —Ä–∞–∑–º–µ—Ä–∞, —Å–∫–æ—Ä–æ—Å—Ç–∏ –∑–∞–ø–∏—Å–∏, fsync latency        |
| 4 | \[10.4 Recovery Testing]  | `testing_recovery` | ‚Üê \[2.3 WAL Engine]                       | `wal_engine`     | WAL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ —ç–º—É–ª—è—Ü–∏–∏ –ø–∞–¥–µ–Ω–∏—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è |
| 5 | \[2.5 Garbage Collection] | `vacuum_engine`    | ‚Üê \[2.3 WAL Engine]                       | `wal_engine`     | WAL —É–≤–µ–¥–æ–º–ª—è–µ—Ç GC –æ–± —É–¥–∞–ª—ë–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫–∞—Ö/–±–ª–æ–∫–∞—Ö          |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                        | ID –±–ª–æ–∫–∞             | ‚Üí –ö—É–¥–∞ (`[2.3 WAL Engine]`) | ID –±–ª–æ–∫–∞     | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                                     |
| - | ---------------------------------------- | -------------------- | --------------------------- | ------------ | --------------------------------------------------------------- |
| 1 | \[0.5 –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞–ø—É—Å–∫–∞]                | `startup_controller` | ‚Üí \[2.3 WAL Engine]         | `wal_engine` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è WAL: –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –±—É—Ñ–µ—Ä—ã, —Ñ–∞–π–ª—ã                  |
| 2 | \[2.2 Transaction Table]                 | `tx_table`           | ‚Üí \[2.3 WAL Engine]         | `wal_engine` | –§–∏–∫—Å–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ WAL                             |
| 3 | \[2.6 Isolation Levels: RC/RR/SI/SERIAL] | `isolation_levels`   | ‚Üí \[2.3 WAL Engine]         | `wal_engine` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è WAL –ø–æ –∏–∑–æ–ª—è—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, group commit) |
| 4 | \[3.1 SQL Parser / MERGE / DML]          | `sql_parser`         | ‚Üí \[2.3 WAL Engine]         | `wal_engine` | DML-–æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–Ω–∏—Ü–∏–∏—Ä—É—é—Ç –∑–∞–ø–∏—Å—å –ª–æ–≥–æ–≤                            |
| 5 | \[5.1 Executor / Parallel Pipelines]     | `parallel_executor`  | ‚Üí \[2.3 WAL Engine]         | `wal_engine` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è WAL –ø—Ä–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö                            |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ WAL**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é fsync-safe, parallel append.
* **–ò–Ω–∂–µ–Ω–µ—Ä –ø–æ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏**: –ø–æ–¥—á–µ—Ä–∫–Ω—É–ª –≤–∞–∂–Ω–æ—Å—Ç—å sync —Å snapshot‚Äô–∞–º–∏.
* **–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ–≥–æ —è–¥—Ä–∞**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å tx\_table –∏ manager.
* **–ò–Ω–∂–µ–Ω–µ—Ä observability**: —É—Ç–≤–µ—Ä–¥–∏–ª —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤ –¥–ª—è –º–µ—Ç—Ä–∏–∫ –∏ –∞–ª–µ—Ä—Ç–æ–≤.
* **DevOps-–∏–Ω–∂–µ–Ω–µ—Ä**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ log rotation –∏ segment size.

---

‚úÖ –ë–ª–æ–∫ \[2.3] (`wal_engine`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É: **\[2.4 Snapshot Manager]** (`snapshot_manager`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.4 Snapshot Manager]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `snapshot_manager`

> ‚úÖ –ë–ª–æ–∫ —É–ø—Ä–∞–≤–ª—è–µ—Ç **—Å–æ–∑–¥–∞–Ω–∏–µ–º, —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º snapshot'–æ–≤**:
> ‚Äî –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ snapshot'–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–∞–∑—ã –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **read-only snapshot**, **as-of query**
> ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞–º–∏ –≤–µ—Ä—Å–∏–π, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å snapshot
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å WAL, MVCC, recovery
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ–Ω–æ–≤–æ–≥–æ snapshotting –∏ TTL/retention snapshot'–æ–≤

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                      | ID –±–ª–æ–∫–∞            | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                    | ID –±–ª–æ–∫–∞           | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                                  |
| - | -------------------------------------- | ------------------- | ------------------------------------ | ------------------ | ------------------------------------------------------------ |
| 1 | \[2.4 Snapshot Manager]                | `snapshot_manager`  | ‚Üí \[2.8 Snapshot / Recovery Engine]  | `wal_snapshot`     | Snapshot –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ recovery engine –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏            |
| 2 | \[2.4 Snapshot Manager]                | `snapshot_manager`  | ‚Üí \[2.1 MVCC / Snapshot Isolation]   | `mvcc_snapshot`    | Snapshot –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ –≤–∏–¥–∏–º—ã—Ö –≤–µ—Ä—Å–∏–π                 |
| 3 | \[2.4 Snapshot Manager]                | `snapshot_manager`  | ‚Üí \[2.5 Garbage Collection / Vacuum] | `vacuum_engine`    | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –≤–µ—Ä—Å–∏–π               |
| 4 | \[1.45 System Versioning / AS OF]      | `system_versioning` | ‚Üê \[2.4 Snapshot Manager]            | `snapshot_manager` | Snapshot –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ AS OF-–∑–∞–ø—Ä–æ—Å–æ–≤          |
| 5 | \[5.1 Executor / Vectorized Execution] | `parallel_executor` | ‚Üê \[2.4 Snapshot Manager]            | `snapshot_manager` | Executor –∏—Å–ø–æ–ª—å–∑—É–µ—Ç snapshot –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                 | ID –±–ª–æ–∫–∞             | ‚Üí –ö—É–¥–∞ (`[2.4 Snapshot Manager]`) | ID –±–ª–æ–∫–∞           | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                                          |
| - | --------------------------------- | -------------------- | --------------------------------- | ------------------ | -------------------------------------------------------------------- |
| 1 | \[0.5 –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞–ø—É—Å–∫–∞]         | `startup_controller` | ‚Üí \[2.4 Snapshot Manager]         | `snapshot_manager` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è snapshot-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è      |
| 2 | \[2.2 Transaction Table]          | `tx_table`           | ‚Üí \[2.4 Snapshot Manager]         | `snapshot_manager` | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è snapshot‚Äô–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π |
| 3 | \[2.3 WAL Engine]                 | `wal_engine`         | ‚Üí \[2.4 Snapshot Manager]         | `snapshot_manager` | WAL –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç persist –∏–∑–º–µ–Ω–µ–Ω–∏–π, –ø–æ–∑–≤–æ–ª—è—è –ø–æ—Å—Ç—Ä–æ–∏—Ç—å snapshot      |
| 4 | \[10.4 Recovery Testing]          | `testing_recovery`   | ‚Üí \[2.4 Snapshot Manager]         | `snapshot_manager` | Snapshot –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è                |
| 5 | \[6.2 –ê—É–¥–∏—Ç –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –∏–∑–º–µ–Ω–µ–Ω–∏–π] | `audit_engine`       | ‚Üí \[2.4 Snapshot Manager]         | `snapshot_manager` | –ê—É–¥–∏—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç snapshot –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π                   |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ MVCC**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –∏–∑–æ–ª—è—Ü–∏—é —á–µ—Ä–µ–∑ snapshot context.
* **–ò–Ω–∂–µ–Ω–µ—Ä –ø–æ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ snapshot –≤ recovery chain.
* **DevOps-–∏–Ω–∂–µ–Ω–µ—Ä**: –æ—Ç–º–µ—Ç–∏–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ snapshot TTL –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π backup.
* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∏—Å—Ç–µ–º—ã –≤–µ—Ä—Å–∏–π**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Å –∑–∞–ø—Ä–æ—Å–∞–º–∏ `AS OF`.
* **–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫ –°–£–ë–î**: —É—Ç–≤–µ—Ä–¥–∏–ª –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å —é–Ω–∏—Ç-—Ç–µ—Å—Ç–∞–º–∏ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∏–∑ snapshot.

---

‚úÖ –ë–ª–æ–∫ \[2.4] (`snapshot_manager`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É: **\[2.5 Garbage Collection / Vacuum]** (`vacuum_engine`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.5 Garbage Collection / Vacuum]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `vacuum_engine`

> ‚úÖ –ë–ª–æ–∫ —Ä–µ–∞–ª–∏–∑—É–µ—Ç **—Ñ–æ–Ω–æ–≤—ã–π —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ (vacuum)**, —É–¥–∞–ª—è—é—â–∏–π —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –≤–µ—Ä—Å–∏–∏ —Å—Ç—Ä–æ–∫:
> ‚Äî –£–¥–∞–ª–µ–Ω–∏–µ MVCC-—Ü–µ–ø–æ—á–µ–∫, –Ω–µ –≤–∏–¥–∏–º—ã—Ö –Ω–∏ –æ–¥–Ω–æ–º—É –∞–∫—Ç–∏–≤–Ω–æ–º—É snapshot
> ‚Äî –°–±–æ—Ä –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤, WAL-—Å–µ–≥–º–µ–Ω—Ç–æ–≤, –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **online vacuum**, **background cleaner**, **epoch-based reclamation**
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MVCC, tx\_table, snapshot\_manager
> ‚Äî –ö–æ–Ω—Ç—Ä–æ–ª—å –ø–æ TTL, –≤–µ—Ä—Å–∏—è–º, –∏ –ø–æ—Ä–æ–≥–∞–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)         | ID –±–ª–æ–∫–∞        | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                       | ID –±–ª–æ–∫–∞             | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                         |
| - | ------------------------- | --------------- | --------------------------------------- | -------------------- | --------------------------------------------------- |
| 1 | \[2.5 Garbage Collection] | `vacuum_engine` | ‚Üí \[1.10 Eviction + TTL + Auto-tiering] | `eviction_engine`    | GC —É–¥–∞–ª—è–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ, –ø–æ–º–æ–≥–∞—è –∞–≤—Ç–æ-—ç–≤–∏–∫—Ü–∏–∏  |
| 2 | \[2.5 Garbage Collection] | `vacuum_engine` | ‚Üí \[7.1 –ú–µ—Ç—Ä–∏–∫–∏ / Monitoring / Alerts]  | `metrics_engine`     | –ú–µ—Ç—Ä–∏–∫–∏ GC: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏–π, latency    |
| 3 | \[2.5 Garbage Collection] | `vacuum_engine` | ‚Üí \[2.1 MVCC / Snapshot Isolation]      | `mvcc_snapshot`      | –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –∏–∑ MVCC-—Ü–µ–ø–æ—á–µ–∫                    |
| 4 | \[2.5 Garbage Collection] | `vacuum_engine` | ‚Üí \[2.3 WAL Engine]                     | `wal_engine`         | –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö WAL-–∑–∞–ø–∏—Å–µ–π                 |
| 5 | \[2.5 Garbage Collection] | `vacuum_engine` | ‚Üí \[9.3 –†–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏ –≤–Ω–µ—à–Ω–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã] | `extensions_runtime` | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –æ–± —É–¥–∞–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                | ID –±–ª–æ–∫–∞             | ‚Üí –ö—É–¥–∞ (`[2.5 Garbage Collection]`) | ID –±–ª–æ–∫–∞        | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                    |
| - | -------------------------------- | -------------------- | ----------------------------------- | --------------- | ---------------------------------------------- |
| 1 | \[0.5 –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞–ø—É—Å–∫–∞]        | `startup_controller` | ‚Üí \[2.5 Garbage Collection]         | `vacuum_engine` | –ó–∞–ø—É—Å–∫ —Ñ–æ–Ω–æ–≤–æ–≥–æ –ø–æ—Ç–æ–∫–∞ vacuum                  |
| 2 | \[2.1 MVCC / Snapshot Isolation] | `mvcc_snapshot`      | ‚Üí \[2.5 Garbage Collection]         | `vacuum_engine` | –ò—Å—Ç–æ—á–Ω–∏–∫ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –≤–µ—Ä—Å–∏–π                     |
| 3 | \[2.2 Transaction Table]         | `tx_table`           | ‚Üí \[2.5 Garbage Collection]         | `vacuum_engine` | GC –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º |
| 4 | \[2.4 Snapshot Manager]          | `snapshot_manager`   | ‚Üí \[2.5 Garbage Collection]         | `vacuum_engine` | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≥—Ä–∞–Ω–∏—Ü—ã –≤–∏–¥–∏–º–æ—Å—Ç–∏ –¥–ª—è GC            |
| 5 | \[10.1 Unit-—Ç–µ—Å—Ç—ã / Vacuum]      | `unit_test_engine`   | ‚Üí \[2.5 Garbage Collection]         | `vacuum_engine` | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö     |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ MVCC**: —É—Ç–≤–µ—Ä–¥–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –æ—á–∏—Å—Ç–∫–∏ –ø–æ snapshot visibility.
* **–ò–Ω–∂–µ–Ω–µ—Ä –ø–æ –ø–∞–º—è—Ç–∏**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª epoch-based reclamation –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ.
* **DevOps-–∏–Ω–∂–µ–Ω–µ—Ä**: –¥–æ–±–∞–≤–∏–ª —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ latency –æ–ø–µ—Ä–∞—Ü–∏–π GC.
* **–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª, —á—Ç–æ GC –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ crash recovery.
* **–ò–Ω–∂–µ–Ω–µ—Ä –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º**: –æ—Ç–º–µ—Ç–∏–ª –≤–∞–∂–Ω–æ—Å—Ç—å –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–π –æ–± —É–¥–∞–ª–µ–Ω–∏–∏ –≤ UDF runtime.

---

‚úÖ –ë–ª–æ–∫ \[2.5] (`vacuum_engine`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É: **\[2.6 Isolation Levels: RC / RR / SI / SERIALIZABLE]** (`isolation_levels`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.6 Isolation Levels: RC / RR / SI / SERIALIZABLE]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `isolation_levels`

> ‚úÖ –ë–ª–æ–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏ —Ä–µ–∞–ª–∏–∑—É–µ—Ç **—É—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**:
> ‚Äî `READ COMMITTED`: –≤–∏–¥–∏–º–æ—Å—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
> ‚Äî `REPEATABLE READ`: snapshot —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
> ‚Äî `SNAPSHOT ISOLATION`: —á–µ—Ä–µ–∑ MVCC snapshot
> ‚Äî `SERIALIZABLE`: —á–µ—Ä–µ–∑ —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ–º–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ read/write conflicts, write-skew detection
> ‚Äî –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è per-session, per-transaction –∏–ª–∏ system-wide
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MVCC, planner, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏, WAL

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                      | ID –±–ª–æ–∫–∞            | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                  | ID –±–ª–æ–∫–∞           | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                                       |
| - | -------------------------------------- | ------------------- | ---------------------------------- | ------------------ | ----------------------------------------------------------------- |
| 1 | \[2.6 Isolation Levels]                | `isolation_levels`  | ‚Üí \[2.1 MVCC / Snapshot Isolation] | `mvcc_snapshot`    | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∑–∞–ø–∏—Å–µ–π                            |
| 2 | \[2.6 Isolation Levels]                | `isolation_levels`  | ‚Üí \[2.2 Transaction Table]         | `tx_table`         | –£—Ä–æ–≤–µ–Ω—å –∏–∑–æ–ª—è—Ü–∏–∏ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏                   |
| 3 | \[2.6 Isolation Levels]                | `isolation_levels`  | ‚Üí \[2.3 WAL Engine]                | `wal_engine`       | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å group commit –∏–ª–∏ –ª–æ–≥–æ–≤ read-dependencies |
| 4 | \[3.2 Optimizer: Cost-based]           | `sql_optimizer`     | ‚Üê \[2.6 Isolation Levels]          | `isolation_levels` | Planner –¥–æ–ª–∂–µ–Ω —É—á–∏—Ç—ã–≤–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å –∏–∑–æ–ª—è—Ü–∏–∏ –ø—Ä–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ –ø–ª–∞–Ω–∞    |
| 5 | \[5.1 Executor / Vectorized Execution] | `parallel_executor` | ‚Üê \[2.6 Isolation Levels]          | `isolation_levels` | Executor –¥–æ–ª–∂–µ–Ω —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å read rules —Å–æ–≥–ª–∞—Å–Ω–æ —É—Ä–æ–≤–Ω—é            |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                       | ID –±–ª–æ–∫–∞             | ‚Üí –ö—É–¥–∞ (`[2.6 Isolation Levels]`) | ID –±–ª–æ–∫–∞           | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                                           |
| - | --------------------------------------- | -------------------- | --------------------------------- | ------------------ | --------------------------------------------------------------------- |
| 1 | \[0.5 –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞–ø—É—Å–∫–∞]               | `startup_controller` | ‚Üí \[2.6 Isolation Levels]         | `isolation_levels` | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —É—Ä–æ–≤–Ω—è –∏–∑–æ–ª—è—Ü–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é                                |
| 2 | \[5.2 Transaction DSL / Exec]           | `tx_dsl_engine`      | ‚Üí \[2.6 Isolation Levels]         | `isolation_levels` | DSL –∑–∞–¥–∞—ë—Ç —É—Ä–æ–≤–µ–Ω—å –∏–∑–æ–ª—è—Ü–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏                                |
| 3 | \[6.1 Security / Policy Engine]         | `security_policies`  | ‚Üí \[2.6 Isolation Levels]         | `isolation_levels` | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –º–æ–≥—É—Ç –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏ |
| 4 | \[10.1 Unit-—Ç–µ—Å—Ç—ã / Isolation]          | `unit_test_engine`   | ‚Üí \[2.6 Isolation Levels]         | `isolation_levels` | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∏ –∞–Ω–æ–º–∞–ª–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Ä–æ–≤–Ω—è –∏–∑–æ–ª—è—Ü–∏–∏        |
| 5 | \[2.7 Transaction Manager / Multi-node] | `tx_manager`         | ‚Üí \[2.6 Isolation Levels]         | `isolation_levels` | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è isolation level –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ                  |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–ò–Ω–∂–µ–Ω–µ—Ä –ø–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π —Å MVCC.
* **–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞**: –æ—Ç–º–µ—Ç–∏–ª –≤–ª–∏—è–Ω–∏–µ –Ω–∞ join reorder –∏ predicate pushdown.
* **DevOps-–∏–Ω–∂–µ–Ω–µ—Ä**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∏–∑–æ–ª—è—Ü–∏–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ executor'–∞**: –æ—Ç–º–µ—Ç–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é read rules —Å snapshot visibility.
* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —É—Ä–æ–≤–Ω–µ–π –∏–∑–æ–ª—è—Ü–∏–∏ –¥–ª—è RBAC/ABAC.

---

‚úÖ –ë–ª–æ–∫ \[2.6] (`isolation_levels`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É: **\[2.7 Transaction Manager / Multi-node Coordinator]** (`tx_manager`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.7 Transaction Manager / Multi-node Coordinator]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `tx_manager`

> ‚úÖ –ë–ª–æ–∫ —Ä–µ–∞–ª–∏–∑—É–µ—Ç **—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏**, –≤–∫–ª—é—á–∞—è:
> ‚Äî –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è, –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **active-active —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏**, 2PC/3PC, Raft/Paxos –∫–æ–Ω—Å–µ–Ω—Å—É—Å–∞
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å WAL, snapshot, tx\_table
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **read/write conflict detection**, distributed locking
> ‚Äî –ü—Ä–æ—Ç–æ–∫–æ–ª **failover**, rollback, multi-node crash recovery
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CDC, –ª–æ–≥–∞–º–∏, observability

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                      | ID –±–ª–æ–∫–∞     | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)            | ID –±–ª–æ–∫–∞           | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                            |
| - | -------------------------------------- | ------------ | ---------------------------- | ------------------ | ------------------------------------------------------ |
| 1 | \[2.7 Transaction Manager]             | `tx_manager` | ‚Üí \[2.3 WAL Engine]          | `wal_engine`       | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –∏–ª–∏ –æ—Ç–∫–∞—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏               |
| 2 | \[2.7 Transaction Manager]             | `tx_manager` | ‚Üí \[2.2 Transaction Table]   | `tx_table`         | –£–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å–∞–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –Ω–∞ –≤—Å–µ—Ö –Ω–æ–¥–∞—Ö           |
| 3 | \[2.7 Transaction Manager]             | `tx_manager` | ‚Üí \[2.6 Isolation Levels]    | `isolation_levels` | –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑–æ–ª—è—Ü–∏–∏ –≤ multi-node         |
| 4 | \[2.7 Transaction Manager]             | `tx_manager` | ‚Üí \[2.4 Snapshot Manager]    | `snapshot_manager` | –ò–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç snapshot –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–≥–æ snapshot —á—Ç–µ–Ω–∏—è |
| 5 | \[4.6 gRPC Protocol / Distributed API] | `grpc_api`   | ‚Üê \[2.7 Transaction Manager] | `tx_manager`       | –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Å—Ä–µ–¥–µ            |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                          | ID –±–ª–æ–∫–∞             | ‚Üí –ö—É–¥–∞ (`[2.7 Transaction Manager]`) | ID –±–ª–æ–∫–∞     | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                    |
| - | ------------------------------------------ | -------------------- | ------------------------------------ | ------------ | ---------------------------------------------- |
| 1 | \[0.5 –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞–ø—É—Å–∫–∞]                  | `startup_controller` | ‚Üí \[2.7 Transaction Manager]         | `tx_manager` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ consensus |
| 2 | \[2.3 WAL Engine]                          | `wal_engine`         | ‚Üí \[2.7 Transaction Manager]         | `tx_manager` | –ü–æ—Å–ª–µ –∑–∞–ø–∏—Å–∏ WAL –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è status            |
| 3 | \[2.5 Garbage Collection / Vacuum]         | `vacuum_engine`      | ‚Üí \[2.7 Transaction Manager]         | `tx_manager` | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, —á—Ç–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã        |
| 4 | \[9.2 –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –∏ –∫–æ–Ω—Å–µ–Ω—Å—É—Å (Raft/Paxos)] | `replication_engine` | ‚Üí \[2.7 Transaction Manager]         | `tx_manager` | –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–π –∫–æ–Ω—Å–µ–Ω—Å—É—Å –∏ –ª–∏–¥–µ—Ä—Å—Ç–≤–æ           |
| 5 | \[10.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã / HA —Å—Ü–µ–Ω–∞—Ä–∏–∏] | `integration_tests`  | ‚Üí \[2.7 Transaction Manager]         | `tx_manager` | –¢–µ—Å—Ç—ã failover –∏ rollback —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π           |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –ø–æ–¥–¥–µ—Ä–∂–∫—É quorum, failover –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.
* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ WAL**: –æ—Ç–º–µ—Ç–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∫–æ–º–º–∏—Ç–∞—Ö/–æ—Ç–∫–∞—Ç–∞—Ö.
* **–ò–Ω–∂–µ–Ω–µ—Ä –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å audit log –∏ CDC.
* **DevOps-–∏–Ω–∂–µ–Ω–µ—Ä**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –º—É–ª—å—Ç–∏–∫–ª–∞—Å—Ç–µ—Ä–Ω—É—é —Ç–æ–ø–æ–ª–æ–≥–∏—é –∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.
* **–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º**: —É—Ç–≤–µ—Ä–¥–∏–ª –º–æ–¥–µ–ª—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å gRPC –∏ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π.

---

‚úÖ –ë–ª–æ–∫ \[2.7] (`tx_manager`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É: **\[2.8 Snapshot / Recovery Engine]** (`wal_snapshot`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.8 Snapshot / Recovery Engine]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `wal_snapshot`

> ‚úÖ –ë–ª–æ–∫ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º **–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** –Ω–∞ –æ—Å–Ω–æ–≤–µ WAL –∏ snapshot:
> ‚Äî –ß—Ç–µ–Ω–∏–µ snapshot –∏ WAL –ø–æ—Å–ª–µ —Å–±–æ—è –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è in-memory —Å–æ—Å—Ç–æ—è–Ω–∏—è
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **instant crash recovery**, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–µ–∑ –¥–æ–ª–≥–æ–≥–æ downtime
> ‚Äî –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, MVCC, —Ç–∞–±–ª–∏—Ü, –∏–Ω–¥–µ–∫—Å–æ–≤
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å startup-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º, snapshot manager, WAL engine
> ‚Äî –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (checksum, signature)

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                    | ID –±–ª–æ–∫–∞         | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                    | ID –±–ª–æ–∫–∞              | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                               |
| - | ------------------------------------ | ---------------- | ------------------------------------ | --------------------- | --------------------------------------------------------- |
| 1 | \[2.8 Snapshot / Recovery Engine]    | `wal_snapshot`   | ‚Üí \[1.1 In-Memory –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ]        | `in_memory_execution` | –ü–æ—Å–ª–µ recovery –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è in-memory —Å—Ç—Ä—É–∫—Ç—É—Ä–∞       |
| 2 | \[2.8 Snapshot / Recovery Engine]    | `wal_snapshot`   | ‚Üí \[2.2 Transaction Table]           | `tx_table`            | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π          |
| 3 | \[2.8 Snapshot / Recovery Engine]    | `wal_snapshot`   | ‚Üí \[2.1 MVCC / Snapshot Isolation]   | `mvcc_snapshot`       | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç–∏ –∑–∞–ø–∏—Å–µ–π –ø–æ—Å–ª–µ snapshot        |
| 4 | \[2.8 Snapshot / Recovery Engine]    | `wal_snapshot`   | ‚Üí \[6.2 –ê—É–¥–∏—Ç / –ò–∑–º–µ–Ω–µ–Ω–∏—è / DML Log] | `audit_engine`        | –ê—É–¥–∏—Ç –ª–æ–≥ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è |
| 5 | \[7.1 –ú–µ—Ç—Ä–∏–∫–∏ / Monitoring / Alerts] | `metrics_engine` | ‚Üê \[2.8 Snapshot / Recovery Engine]  | `wal_snapshot`        | –ú–µ—Ç—Ä–∏–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è, –æ—à–∏–±–æ–∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è     |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                      | ID –±–ª–æ–∫–∞             | ‚Üí –ö—É–¥–∞ (`[2.8 Snapshot / Recovery Engine]`) | ID –±–ª–æ–∫–∞       | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                                |
| - | -------------------------------------- | -------------------- | ------------------------------------------- | -------------- | ---------------------------------------------------------- |
| 1 | \[0.5 –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞–ø—É—Å–∫–∞]              | `startup_controller` | ‚Üí \[2.8 Snapshot / Recovery Engine]         | `wal_snapshot` | –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–∏—Å—Ç–µ–º—ã recovery ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —à–∞–≥             |
| 2 | \[2.3 WAL Engine]                      | `wal_engine`         | ‚Üí \[2.8 Snapshot / Recovery Engine]         | `wal_snapshot` | Recovery engine –ø—Ä–∏–º–µ–Ω—è–µ—Ç WAL-–∑–∞–ø–∏—Å–∏                       |
| 3 | \[2.4 Snapshot Manager]                | `snapshot_manager`   | ‚Üí \[2.8 Snapshot / Recovery Engine]         | `wal_snapshot` | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è snapshot –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è         |
| 4 | \[10.4 –¢–µ—Å—Ç—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è / crash]   | `testing_recovery`   | ‚Üí \[2.8 Snapshot / Recovery Engine]         | `wal_snapshot` | –Æ–Ω–∏—Ç/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å–∏–º—É–ª–∏—Ä—É—é—Ç recovery              |
| 5 | \[6.4 Access Control / Secure Startup] | `secure_boot`        | ‚Üí \[2.8 Snapshot / Recovery Engine]         | `wal_snapshot` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ snapshot, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ WAL –∏ Snapshot**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å recovery –∞–ª–≥–æ—Ä–∏—Ç–º–∞ —Å diff-based –ª–æ–≥–∞–º–∏.
* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª crash-recovery < 1 —Å–µ–∫ –ø—Ä–∏ 1B —Å—Ç—Ä–æ–∫.
* **DevOps-–∏–Ω–∂–µ–Ω–µ—Ä**: —É—Ç–≤–µ—Ä–¥–∏–ª –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.
* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –≤–∞–ª–∏–¥–∞—Ü–∏—é snapshot –ø—Ä–∏ secure boot.
* **–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫ –°–£–ë–î**: –æ—Ç–º–µ—Ç–∏–ª –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è, –≤–∫–ª—é—á–∞—è rollback WAL.

---

‚úÖ –ë–ª–æ–∫ \[2.8] (`wal_snapshot`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É:
**\[2.9 Active-active / Active-passive —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è]** (`replication_engine`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.9 Active-active / Active-passive —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `replication_engine`

> ‚úÖ –ë–ª–æ–∫ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é **—Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** –º–µ–∂–¥—É —É–∑–ª–∞–º–∏:
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **active-active –∏ active-passive** —Å—Ö–µ–º
> ‚Äî –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ consensus-–ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤: **Raft / Paxos**
> ‚Äî –†–µ–ø–ª–∏–∫–∞—Ü–∏—è WAL, snapshot, –∏–∑–º–µ–Ω–µ–Ω–∏–π (CDC)
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ conflict resolution, replay ordering, failover
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º, WAL, recovery
> ‚Äî –ü—Ä–æ—Ç–æ–∫–æ–ª heartbeat, leader election, quorum detection

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`) | ID –±–ª–æ–∫–∞             | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                        | ID –±–ª–æ–∫–∞           | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                                           |
| - | ----------------- | -------------------- | ---------------------------------------- | ------------------ | --------------------------------------------------------------------- |
| 1 | \[2.9 –†–µ–ø–ª–∏–∫–∞—Ü–∏—è] | `replication_engine` | ‚Üí \[2.7 Transaction Manager]             | `tx_manager`       | –†–µ–ø–ª–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ, leader/follower –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è |
| 2 | \[2.9 –†–µ–ø–ª–∏–∫–∞—Ü–∏—è] | `replication_engine` | ‚Üí \[2.3 WAL Engine]                      | `wal_engine`       | –†–µ–ø–ª–∏–∫–∞—Ü–∏—è WAL-—Å–µ–≥–º–µ–Ω—Ç–æ–≤                                              |
| 3 | \[2.9 –†–µ–ø–ª–∏–∫–∞—Ü–∏—è] | `replication_engine` | ‚Üí \[2.4 Snapshot Manager]                | `snapshot_manager` | –†–µ–ø–ª–∏–∫–∞—Ü–∏—è snapshot'–æ–≤ –Ω–∞ –≤—Ç–æ—Ä–∏—á–Ω—ã–µ —É–∑–ª—ã                              |
| 4 | \[2.9 –†–µ–ø–ª–∏–∫–∞—Ü–∏—è] | `replication_engine` | ‚Üí \[4.6 gRPC Protocol / Distributed API] | `grpc_api`         | –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ gRPC –º–µ–∂–¥—É —É–∑–ª–∞–º–∏                        |
| 5 | \[2.9 –†–µ–ø–ª–∏–∫–∞—Ü–∏—è] | `replication_engine` | ‚Üí \[6.3 Audit / Consensus Log / Chain]   | `audit_engine`     | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–µ–∂–¥—É —É–∑–ª–∞–º–∏                      |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                          | ID –±–ª–æ–∫–∞             | ‚Üí –ö—É–¥–∞ (`[2.9 –†–µ–ø–ª–∏–∫–∞—Ü–∏—è]`) | ID –±–ª–æ–∫–∞             | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                         |
| - | ------------------------------------------ | -------------------- | --------------------------- | -------------------- | --------------------------------------------------- |
| 1 | \[0.5 –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞–ø—É—Å–∫–∞]                  | `startup_controller` | ‚Üí \[2.9 –†–µ–ø–ª–∏–∫–∞—Ü–∏—è]         | `replication_engine` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞, –≤—ã–±–æ—Ä –ª–∏–¥–µ—Ä–∞                |
| 2 | \[4.6 gRPC Protocol / Distributed API]     | `grpc_api`           | ‚Üí \[2.9 –†–µ–ø–ª–∏–∫–∞—Ü–∏—è]         | `replication_engine` | –°–µ—Ç–µ–≤–æ–π —É—Ä–æ–≤–µ–Ω—å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –∫–æ–º–∞–Ω–¥ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏        |
| 3 | \[9.2 –í–Ω–µ—à–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è / CDC Streaming]  | `cdc_streaming`      | ‚Üí \[2.9 –†–µ–ø–ª–∏–∫–∞—Ü–∏—è]         | `replication_engine` | –ü–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π —á–µ—Ä–µ–∑ Kafka / Debezium |
| 4 | \[2.3 WAL Engine]                          | `wal_engine`         | ‚Üí \[2.9 –†–µ–ø–ª–∏–∫–∞—Ü–∏—è]         | `replication_engine` | WAL —Ä–µ–ø–ª–∏—Ü–∏—Ä—É–µ—Ç—Å—è –≤ –¥—Ä—É–≥–∏–µ —É–∑–ª—ã                     |
| 5 | \[10.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã / HA —Å—Ü–µ–Ω–∞—Ä–∏–∏] | `integration_tests`  | ‚Üí \[2.9 –†–µ–ø–ª–∏–∫–∞—Ü–∏—è]         | `replication_engine` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∏ failover              |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–ò–Ω–∂–µ–Ω–µ—Ä –ø–æ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª quorum-aware replication, automatic failover.
* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ WAL**: –æ—Ç–º–µ—Ç–∏–ª –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø–µ—Ä–µ–¥–∞—á–∏ WAL —Å log compaction.
* **–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º**: —É—Ç–≤–µ—Ä–¥–∏–ª –º–æ–¥–µ–ª—å leader/follower —Å Raft.
* **–ò–Ω–∂–µ–Ω–µ—Ä CDC**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Kafka, Debezium, Changefeed.
* **DevOps-–∏–Ω–∂–µ–Ω–µ—Ä**: –æ—Ç–º–µ—Ç–∏–ª –º–µ—Ç—Ä–∏–∫–∏ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏, latency, heartbeat –∏ split-brain detection.

---

‚úÖ –ë–ª–æ–∫ \[2.9] (`replication_engine`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É:
**\[2.10 Failover / Multi-node Recovery]** (`failover_engine`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.10 Failover / Multi-node Recovery]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `failover_engine`

> ‚úÖ –ë–ª–æ–∫ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º—ã **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è (failover)** –∏ **–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —É–∑–ª–æ–≤ (multi-node recovery)**:
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ—Ç–∫–∞–∑–æ–≤ (watchdog, heartbeat, quorum)
> ‚Äî –ü–µ—Ä–µ–Ω–æ—Å —Ä–æ–ª–µ–π –∏ —Å–µ—Å—Å–∏–π –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ (active-passive, active-active)
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å WAL, snapshot, —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–≤–æ—Ä—É–º–∞, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø–æ—Ç–æ–∫–æ–≤, state transfer
> ‚Äî –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –≤—ã—Å–æ–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (HA), crash resilience
> ‚Äî –õ–æ–≥–∏–∫–∞ –≤–Ω—É—Ç—Ä–∏ Raft/Paxos –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ failover-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`) | ID –±–ª–æ–∫–∞          | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                        | ID –±–ª–æ–∫–∞             | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                      |
| - | ----------------- | ----------------- | ---------------------------------------- | -------------------- | ------------------------------------------------ |
| 1 | \[2.10 Failover]  | `failover_engine` | ‚Üí \[2.9 –†–µ–ø–ª–∏–∫–∞—Ü–∏—è]                      | `replication_engine` | –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ª–∏–¥–µ—Ä—Å—Ç–≤–∞    |
| 2 | \[2.10 Failover]  | `failover_engine` | ‚Üí \[2.7 Transaction Manager]             | `tx_manager`         | –ü–µ—Ä–µ–¥–∞—á–∞ –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π                |
| 3 | \[2.10 Failover]  | `failover_engine` | ‚Üí \[2.8 Snapshot / Recovery Engine]      | `wal_snapshot`       | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ in-memory —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞ –Ω–æ–≤–æ–º —É–∑–ª–µ |
| 4 | \[2.10 Failover]  | `failover_engine` | ‚Üí \[4.6 gRPC Protocol / Distributed API] | `grpc_api`           | –û–ø–æ–≤–µ—â–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –æ failover, –ø–µ—Ä–µ—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è  |
| 5 | \[2.10 Failover]  | `failover_engine` | ‚Üí \[7.1 –ú–µ—Ç—Ä–∏–∫–∏ / Monitoring / Alerts]   | `metrics_engine`     | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ–±—ã—Ç–∏–π –æ—Ç–∫–∞–∑–∞, latency –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è  |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                            | ID –±–ª–æ–∫–∞             | ‚Üí –ö—É–¥–∞ (`[2.10 Failover]`) | ID –±–ª–æ–∫–∞          | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                          |
| - | -------------------------------------------- | -------------------- | -------------------------- | ----------------- | ---------------------------------------------------- |
| 1 | \[0.5 –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞–ø—É—Å–∫–∞]                    | `startup_controller` | ‚Üí \[2.10 Failover]         | `failover_engine` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è watchdog –∏ recovery –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞          |
| 2 | \[2.9 –†–µ–ø–ª–∏–∫–∞—Ü–∏—è / Consensus]                | `replication_engine` | ‚Üí \[2.10 Failover]         | `failover_engine` | –ö–æ–Ω—Å–µ–Ω—Å—É—Å –º–æ–∂–µ—Ç –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å failover                |
| 3 | \[9.5 Async Event Processing / Triggers]     | `event_processor`    | ‚Üí \[2.10 Failover]         | `failover_engine` | –¢—Ä–∏–≥–≥–µ—Ä—ã —Å–æ–±—ã—Ç–∏–π, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –æ—Ç–∫–∞–∑–æ–º —É–∑–ª–æ–≤          |
| 4 | \[10.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã / HA —Å—Ü–µ–Ω–∞—Ä–∏–∏]   | `integration_tests`  | ‚Üí \[2.10 Failover]         | `failover_engine` | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è |
| 5 | \[6.4 Secure Boot / Access Control Failover] | `secure_boot`        | ‚Üí \[2.10 Failover]         | `failover_engine` | –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —É–∑–ª–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏    |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–ò–Ω–∂–µ–Ω–µ—Ä –ø–æ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ (HA)**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π.
* **DevOps-–∏–Ω–∂–µ–Ω–µ—Ä**: –æ—Ç–º–µ—Ç–∏–ª –ø–æ–¥–¥–µ—Ä–∂–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π Alertmanager –∏ failover event logs.
* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: —É—Ç–≤–µ—Ä–¥–∏–ª –±–µ–∑–æ–ø–∞—Å–Ω—É—é –ø–µ—Ä–µ–¥–∞—á—É leadership –∏ startup verification.
* **–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫ –æ—Ç–∫–∞–∑–æ–≤**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª —É—Å–ø–µ—à–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö –ø–æ—Ç–æ–∫–æ–≤.
* **–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º**: —É—Ç–≤–µ—Ä–¥–∏–ª —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å quorum-based recovery.

---

‚úÖ –ë–ª–æ–∫ \[2.10] (`failover_engine`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É:
**\[2.11 Watchdog / Heartbeat / Node Liveness]** (`watchdog_monitor`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.11 Watchdog / Heartbeat / Node Liveness]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `watchdog_monitor`

> ‚úÖ –ë–ª–æ–∫ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç **–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∂–∏–≤–æ—Å—Ç–∏ —É–∑–ª–æ–≤ (node liveness)** –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –æ—Ç–∫–∞–∑–æ–≤:
> ‚Äî –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ **heartbeat-—Å–æ–æ–±—â–µ–Ω–∏—è** –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞
> ‚Äî –î–µ—Ç–µ–∫—Ü–∏—è "–∑–∞–≤–∏—Å—à–∏—Ö" –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —É–∑–ª–æ–≤
> ‚Äî –ò–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∏–µ **failover** –∏–ª–∏ **re-election** —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏, –∞–ª–µ—Ä—Ç–∞–º–∏ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ quorum-aware health check, backpressure detection
> ‚Äî –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ –Ω–∞ –∫–∞–∂–¥–æ–º —É–∑–ª–µ

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`) | ID –±–ª–æ–∫–∞           | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                             | ID –±–ª–æ–∫–∞             | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                       |
| - | ----------------- | ------------------ | --------------------------------------------- | -------------------- | ------------------------------------------------- |
| 1 | \[2.11 Watchdog]  | `watchdog_monitor` | ‚Üí \[2.10 Failover]                            | `failover_engine`    | –ü—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —É–∑–ª–∞ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç failover        |
| 2 | \[2.11 Watchdog]  | `watchdog_monitor` | ‚Üí \[2.9 –†–µ–ø–ª–∏–∫–∞—Ü–∏—è]                           | `replication_engine` | –ò–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ–± –æ—Ç–∫–∞–∑–µ —É–∑–ª–∞, –≤–æ–∑–º–æ–∂–Ω–æ –ø–µ—Ä–µ–∏–∑–±—Ä–∞–Ω–∏–µ |
| 3 | \[2.11 Watchdog]  | `watchdog_monitor` | ‚Üí \[7.1 –ú–µ—Ç—Ä–∏–∫–∏ / Monitoring / Alerts]        | `metrics_engine`     | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ liveness –∏ –∑–∞–¥–µ—Ä–∂–∫–∞—Ö      |
| 4 | \[2.11 Watchdog]  | `watchdog_monitor` | ‚Üí \[6.2 –ê—É–¥–∏—Ç / Event Log / Security Monitor] | `audit_engine`       | –ê—É–¥–∏—Ç –æ—Ç–∫–∞–∑–æ–≤ –∏ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π           |
| 5 | \[2.11 Watchdog]  | `watchdog_monitor` | ‚Üí \[4.6 gRPC Protocol / Distributed API]      | `grpc_api`           | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç RPC –¥–ª—è ping/heartbeat –º–µ–∂–¥—É —É–∑–ª–∞–º–∏    |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                          | ID –±–ª–æ–∫–∞             | ‚Üí –ö—É–¥–∞ (`[2.11 Watchdog]`) | ID –±–ª–æ–∫–∞           | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                      |
| - | ------------------------------------------ | -------------------- | -------------------------- | ------------------ | ------------------------------------------------ |
| 1 | \[0.5 –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞–ø—É—Å–∫–∞]                  | `startup_controller` | ‚Üí \[2.11 Watchdog]         | `watchdog_monitor` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è background-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –ø–æ—Ç–æ–∫–æ–≤   |
| 2 | \[10.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã / HA —Å—Ü–µ–Ω–∞—Ä–∏–∏] | `integration_tests`  | ‚Üí \[2.11 Watchdog]         | `watchdog_monitor` | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ heartbeat/failure detection         |
| 3 | \[2.9 –†–µ–ø–ª–∏–∫–∞—Ü–∏—è]                          | `replication_engine` | ‚Üí \[2.11 Watchdog]         | `watchdog_monitor` | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ liveness –≤ consensus-–ø—Ä–æ—Ç–æ–∫–æ–ª–µ |
| 4 | \[9.5 Async Event Processing / Triggers]   | `event_processor`    | ‚Üí \[2.11 Watchdog]         | `watchdog_monitor` | –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å liveness          |
| 5 | \[7.2 OpenTelemetry / Trace / Span Engine] | `otel_engine`        | ‚Üí \[2.11 Watchdog]         | `watchdog_monitor` | –û—Ç–ø—Ä–∞–≤–∫–∞ trace-–¥–∞–Ω–Ω—ã—Ö –ø–æ –∑–∞–¥–µ—Ä–∂–∫–∞–º / heartbeat   |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–ò–Ω–∂–µ–Ω–µ—Ä –ø–æ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –Ω–∞–¥—ë–∂–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é liveness detection —á–µ—Ä–µ–∑ heartbeat loop.
* **DevOps-–∏–Ω–∂–µ–Ω–µ—Ä**: –æ—Ç–º–µ—Ç–∏–ª –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Alertmanager, Prometheus, trace.
* **–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å quorum-based health check.
* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: —É—Ç–≤–µ—Ä–¥–∏–ª –∞—É–¥–∏—Ç –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –∏ –ø–∞–¥–µ–Ω–∏–π —É–∑–ª–æ–≤.
* **–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫ –æ—Ç–∫–∞–∑–æ–≤**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–µ–∞–∫—Ü–∏—é –Ω–∞ –ø–æ—Ç–µ—Ä–∏ heartbeat.

---

‚úÖ –ë–ª–æ–∫ \[2.11] (`watchdog_monitor`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É:
**\[2.12 Garbage Collection / Vacuum]** (`vacuum_engine`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.12 Garbage Collection / Vacuum]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `vacuum_engine`

> ‚úÖ –ë–ª–æ–∫ —Ä–µ–∞–ª–∏–∑—É–µ—Ç **—Ñ–æ–Ω–æ–≤—É—é —Å–±–æ—Ä–∫—É –º—É—Å–æ—Ä–∞ (GC)** –≤ –º–Ω–æ–≥–æ–≤–µ—Ä—Å–∏–æ–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ:
> ‚Äî –û—á–∏—Å—Ç–∫–∞ **—É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –≤–µ—Ä—Å–∏–π –∑–∞–ø–∏—Å–µ–π** –≤ MVCC chain
> ‚Äî –£–¥–∞–ª–µ–Ω–∏–µ —É–∂–µ –Ω–µ –≤–∏–¥–∏–º—ã—Ö **undo/redo chain entry**
> ‚Äî –†–∞–±–æ—Ç–∞ –≤ —Ñ–æ–Ω–µ –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ OLTP/OLAP –æ–ø–µ—Ä–∞—Ü–∏–π
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å snapshot manager, tx\_table, MVCC
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–≤—Ç–æ-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Å—Ç–æ—Ç—ã –≤–∞–∫—É—É–º–∞, –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫—É
> ‚Äî –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ—Ç—Ä–∏–∫–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, TTL

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)      | ID –±–ª–æ–∫–∞        | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                      | ID –±–ª–æ–∫–∞           | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                       |
| - | ---------------------- | --------------- | -------------------------------------- | ------------------ | ------------------------------------------------- |
| 1 | \[2.12 Vacuum]         | `vacuum_engine` | ‚Üí \[2.1 MVCC / Snapshot Isolation]     | `mvcc_snapshot`    | –£–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ –∑–∞–ø–∏—Å–µ–π –∏–∑ MVCC chain       |
| 2 | \[2.12 Vacuum]         | `vacuum_engine` | ‚Üí \[2.2 Transaction Table]             | `tx_table`         | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ—Å—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –¥–ª—è GC         |
| 3 | \[2.12 Vacuum]         | `vacuum_engine` | ‚Üí \[2.4 Snapshot Manager]              | `snapshot_manager` | –û—á–∏—â–∞–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ snapshot –∏ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã |
| 4 | \[2.12 Vacuum]         | `vacuum_engine` | ‚Üí \[7.1 –ú–µ—Ç—Ä–∏–∫–∏ / Monitoring / Alerts] | `metrics_engine`   | –ü—É–±–ª–∏–∫—É–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å GC, –∑–∞–¥–µ—Ä–∂–∫–∏, –ø—Ä–æ–≥—Ä–µ—Å—Å       |
| 5 | \[6.2 –ê—É–¥–∏—Ç / DML Log] | `audit_engine`  | ‚Üê \[2.12 Vacuum]                       | `vacuum_engine`    | –ê—É–¥–∏—Ç –º–∞—Å—Å–æ–≤—ã—Ö —É–¥–∞–ª–µ–Ω–∏–π –∏ –≤–∞–∫—É—É–º–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π      |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                     | ID –±–ª–æ–∫–∞             | ‚Üí –ö—É–¥–∞ (`[2.12 Vacuum]`) | ID –±–ª–æ–∫–∞        | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                                     |
| - | ------------------------------------- | -------------------- | ------------------------ | --------------- | --------------------------------------------------------------- |
| 1 | \[0.5 –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞–ø—É—Å–∫–∞]             | `startup_controller` | ‚Üí \[2.12 Vacuum]         | `vacuum_engine` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–æ–Ω–æ–≤—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Vacuum                          |
| 2 | \[2.2 Transaction Table]              | `tx_table`           | ‚Üí \[2.12 Vacuum]         | `vacuum_engine` | –ü–µ—Ä–µ–¥–∞—ë—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–∫–æ–Ω—á–µ–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö                   |
| 3 | \[2.1 MVCC / Snapshot Isolation]      | `mvcc_snapshot`      | ‚Üí \[2.12 Vacuum]         | `vacuum_engine` | –ü–æ–∑–≤–æ–ª—è–µ—Ç GC –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ –≤–∏–¥–∏–º–æ—Å—Ç—å snapshot              |
| 4 | \[7.2 OpenTelemetry / Profiler]       | `otel_engine`        | ‚Üí \[2.12 Vacuum]         | `vacuum_engine` | –ü–µ—Ä–µ–¥–∞—ë—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∑–∞–¥–µ—Ä–∂–µ–∫ –¥–ª—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –≤–∞–∫—É—É–º–∞ |
| 5 | \[1.13 TTL / Auto-Tiering / Eviction] | `ttl_engine`         | ‚Üí \[2.12 Vacuum]         | `vacuum_engine` | –í–∞–∫—É—É–º –æ—á–∏—â–∞–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–æ TTL                         |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ MVCC**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª —Ä–∞–±–æ—Ç—É GC —Å compressed chains.
* **–ò–Ω–∂–µ–Ω–µ—Ä –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**: —É—Ç–≤–µ—Ä–¥–∏–ª –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ OLTP-–ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å.
* **DevOps-–∏–Ω–∂–µ–Ω–µ—Ä**: –æ—Ç–º–µ—Ç–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ GC.
* **–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å snapshot'–∞–º–∏.
* **–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫ –°–£–ë–î**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤–∞–∫—É—É–º–∞ –≤ –ø–∏–∫–æ–≤—ã—Ö –Ω–∞–≥—Ä—É–∑–∫–∞—Ö.

---

‚úÖ –ë–ª–æ–∫ \[2.12] (`vacuum_engine`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É:
**\[2.13 DDL Transactions / Schema Locking]** (`ddl_tx_lock`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.13 DDL Transactions / Schema Locking]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `ddl_tx_lock`

> ‚úÖ –ë–ª–æ–∫ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º **—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç–∏ DDL-–æ–ø–µ—Ä–∞—Ü–∏–π** –∏ **–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å—Ö–µ–º—ã**:
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞—Ç–æ–º–∞—Ä–Ω—ã—Ö DDL (CREATE, DROP, ALTER)
> ‚Äî –õ–æ–≥–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞: **—Ç–∞–±–ª–∏—Ü, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π, –∏–Ω–¥–µ–∫—Å–æ–≤, –ø—Ä–æ—Ü–µ–¥—É—Ä**
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å transaction manager: `DDL as transaction`
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ DDL –≤–Ω—É—Ç—Ä–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (BEGIN ‚Ä¶ CREATE ‚Ä¶ COMMIT)
> ‚Äî –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å MVCC, snapshot, online schema change
> ‚Äî –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å DML –∏ DDL –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)               | ID –±–ª–æ–∫–∞       | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                         | ID –±–ª–æ–∫–∞        | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                         |
| - | ------------------------------- | -------------- | ----------------------------------------- | --------------- | --------------------------------------------------- |
| 1 | \[2.13 DDL Locking]             | `ddl_tx_lock`  | ‚Üí \[2.7 Transaction Manager]              | `tx_manager`    | –û–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç DDL –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å TID |
| 2 | \[2.13 DDL Locking]             | `ddl_tx_lock`  | ‚Üí \[2.2 Transaction Table]                | `tx_table`      | –§–∏–∫—Å–∏—Ä—É–µ—Ç DDL –∫–∞–∫ –∞–∫—Ç–∏–≤–Ω—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é               |
| 3 | \[2.13 DDL Locking]             | `ddl_tx_lock`  | ‚Üí \[5.2 View / Materialized View Manager] | `view_manager`  | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ DDL-–ø—Ä–æ—Ü–µ–¥—É—Ä–∞–º–∏ –Ω–∞–¥ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è–º–∏      |
| 4 | \[2.13 DDL Locking]             | `ddl_tx_lock`  | ‚Üí \[2.14 Online Schema Change Engine]     | `schema_change` | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –∞—Ç–æ–º–∞—Ä–Ω—ã—Ö ALTER –æ–ø–µ—Ä–∞—Ü–∏–π —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π  |
| 5 | \[6.2 –ê—É–¥–∏—Ç / DDL Log / Policy] | `audit_engine` | ‚Üê \[2.13 DDL Locking]                     | `ddl_tx_lock`   | –ê—É–¥–∏—Ç –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞–¥ —Å—Ö–µ–º–æ–π                           |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                   | ID –±–ª–æ–∫–∞             | ‚Üí –ö—É–¥–∞ (`[2.13 DDL Locking]`) | ID –±–ª–æ–∫–∞      | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                               |
| - | ----------------------------------- | -------------------- | ----------------------------- | ------------- | --------------------------------------------------------- |
| 1 | \[3.6 DDL Parser / AST Generator]   | `ddl_parser`         | ‚Üí \[2.13 DDL Locking]         | `ddl_tx_lock` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è DDL-–∫–æ–º–∞–Ω–¥, —Ç—Ä–µ–±—É–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø—Ä–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ |
| 2 | \[0.5 –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞–ø—É—Å–∫–∞]           | `startup_controller` | ‚Üí \[2.13 DDL Locking]         | `ddl_tx_lock` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º—ã –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö DDL-–º–µ—Ö–∞–Ω–∏–∑–º–æ–≤           |
| 3 | \[2.1 MVCC / Snapshot Isolation]    | `mvcc_snapshot`      | ‚Üí \[2.13 DDL Locking]         | `ddl_tx_lock` | –ö–æ–Ω—Ç—Ä–æ–ª—å –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç–∏ DDL, snapshot visibility            |
| 4 | \[2.14 Online Schema Change Engine] | `schema_change`      | ‚Üí \[2.13 DDL Locking]         | `ddl_tx_lock` | –í—ã–ø–æ–ª–Ω—è–µ—Ç DDL —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Å—Ö–µ–º–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏       |
| 5 | \[10.3 –¢–µ—Å—Ç—ã DDL / ALTER / CREATE]  | `testing_ddl`        | ‚Üí \[2.13 DDL Locking]         | `ddl_tx_lock` | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã—Ö DDL                   |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–ò–Ω–∂–µ–Ω–µ—Ä –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Å—Ö–µ–º–æ–π (DDL)**: —É—Ç–≤–µ—Ä–¥–∏–ª DDL –≤–Ω—É—Ç—Ä–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å ALTER ONLINE.
* **–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å DDL —Å MVCC –∏ snapshot visibility.
* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø–∞—Ä—Å–µ—Ä–∞ SQL**: –æ—Ç–º–µ—Ç–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –ø–µ—Ä–µ–¥–∞—á—É AST –≤ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É.
* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –ø–æ–¥–¥–µ—Ä–∂–∫—É DDL-–ø–æ–ª–∏—Ç–∏–∫ –¥–æ—Å—Ç—É–ø–∞ –∏ –ª–æ–≥–æ–≤.
* **–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫ –°–£–ë–î**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª ACID-—Å–≤–æ–π—Å—Ç–≤–∞ CREATE/ALTER/DROP –æ–ø–µ—Ä–∞—Ü–∏–π.

---

‚úÖ –ë–ª–æ–∫ \[2.13] (`ddl_tx_lock`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É:
**\[2.14 Online Schema Change Engine]** (`schema_change`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.14 Online Schema Change Engine]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `schema_change`

> ‚úÖ –ë–ª–æ–∫ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ **–±–µ–∑–æ—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã (Online ALTER / DDL)**:
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **ALTER TABLE ADD/DROP/MODIFY** –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö
> ‚Äî –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫ –≤ —Ñ–æ–Ω–µ (copy-on-write, delta merge)
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MVCC: –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π —Ç–∞–±–ª–∏—Ü –ø–æ snapshot
> ‚Äî –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å DML-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ –≤–æ –≤—Ä–µ–º—è ALTER
> ‚Äî –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ö–µ–º—ã, –æ—Ç–∫–∞—Ç –ø–æ –æ—à–∏–±–∫–µ
> ‚Äî –†–∞–±–æ—Ç–∞ —Å materialized views, –∏–Ω–¥–µ–∫—Å–∞–º–∏, constraints

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                      | ID –±–ª–æ–∫–∞        | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                           | ID –±–ª–æ–∫–∞        | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                               |
| - | -------------------------------------- | --------------- | ------------------------------------------- | --------------- | ----------------------------------------- |
| 1 | \[2.14 Online Schema Change]           | `schema_change` | ‚Üí \[2.13 DDL Transactions / Schema Locking] | `ddl_tx_lock`   | –ò–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç DDL, —Ç—Ä–µ–±—É–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å—Ö–µ–º—ã  |
| 2 | \[2.14 Online Schema Change]           | `schema_change` | ‚Üí \[2.1 MVCC / Snapshot Isolation]          | `mvcc_snapshot` | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —Å–º–µ–Ω—ã –≤–µ—Ä—Å–∏–π —Ç–∞–±–ª–∏—Ü –ø—Ä–∏ ALTER |
| 3 | \[2.14 Online Schema Change]           | `schema_change` | ‚Üí \[5.1 Table Catalog]                      | `table_catalog` | –û–±–Ω–æ–≤–ª—è–µ—Ç –º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–∞–±–ª–∏—Ü–∞—Ö       |
| 4 | \[2.14 Online Schema Change]           | `schema_change` | ‚Üí \[2.2 Transaction Table]                  | `tx_table`      | –í–µ–¥–µ–Ω–∏–µ DDL –∫–∞–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏                |
| 5 | \[6.2 Audit / DDL Log / Access Policy] | `audit_engine`  | ‚Üê \[2.14 Online Schema Change]              | `schema_change` | –§–∏–∫—Å–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã         |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                         | ID –±–ª–æ–∫–∞        | ‚Üí –ö—É–¥–∞ (`[2.14 Schema Change]`) | ID –±–ª–æ–∫–∞        | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                      |
| - | ----------------------------------------- | --------------- | ------------------------------- | --------------- | ------------------------------------------------ |
| 1 | \[2.13 DDL Transactions / Schema Locking] | `ddl_tx_lock`   | ‚Üí \[2.14 Online Schema Change]  | `schema_change` | –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å—Ö–µ–º—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è ALTER            |
| 2 | \[3.6 DDL Parser / AST Generator]         | `ddl_parser`    | ‚Üí \[2.14 Online Schema Change]  | `schema_change` | –ü–µ—Ä–µ–¥–∞—ë—Ç —Å–µ–º–∞–Ω—Ç–∏–∫—É DDL –≤ engine ALTER TABLE      |
| 3 | \[2.1 MVCC / Snapshot Isolation]          | `mvcc_snapshot` | ‚Üí \[2.14 Online Schema Change]  | `schema_change` | –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –≤–µ—Ä—Å–∏–∏ —Å—Ö–µ–º—ã |
| 4 | \[5.1 Table Catalog]                      | `table_catalog` | ‚Üí \[2.14 Online Schema Change]  | `schema_change` | –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ ALTER     |
| 5 | \[10.3 DDL / Schema Tests]                | `testing_ddl`   | ‚Üí \[2.14 Online Schema Change]  | `schema_change` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ online schema change       |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–ò–Ω–∂–µ–Ω–µ—Ä –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Å—Ö–µ–º–æ–π (DDL)**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å live-–∑–∞–ø—Ä–æ—Å–∞–º–∏.
* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ MVCC**: —É—Ç–≤–µ—Ä–¥–∏–ª –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü —á–µ—Ä–µ–∑ snapshot boundary.
* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª transactional rollback –ø—Ä–∏ –æ—à–∏–±–∫–µ.
* **–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä BI**: –æ—Ç–º–µ—Ç–∏–ª –ø–æ–¥–¥–µ—Ä–∂–∫—É –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫ –≤ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö.
* **–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫ –°–£–ë–î**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –ø—Ä–∏ ALTER.

---

‚úÖ –ë–ª–æ–∫ \[2.14] (`schema_change`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É:
**\[2.15 WAL + Snapshot + Instant Recovery]** (`wal_snapshot`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.15 WAL + Snapshot + Instant Recovery]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `wal_snapshot`

> ‚úÖ –ë–ª–æ–∫ —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º **–∂—É—Ä–Ω–∞–ª–∏—Ä–æ–≤–∞–Ω–∏—è WAL**, **—Å–Ω–∏–º–∫–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è** –∏ **–º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è**:
> ‚Äî **WAL (Write-Ahead Logging)** —Å log compaction, diff-based –ª–æ–≥–∞–º–∏
> ‚Äî **Snapshot engine** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π copy-on-write –∏ delta-based snapshot
> ‚Äî –ú–µ—Ö–∞–Ω–∏–∑–º **instant recovery** ‚Äî –±—ã—Å—Ç—Ä–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ –ø–∞–º—è—Ç—å
> ‚Äî –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å MVCC, snapshot isolation, GC, replication
> ‚Äî –§–æ–Ω–æ–≤–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ WAL/SNAPSHOT
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ WAL writer, snapshot loader, recovery thread pool

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)           | ID –±–ª–æ–∫–∞         | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                        | ID –±–ª–æ–∫–∞           | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                |
| - | --------------------------- | ---------------- | ---------------------------------------- | ------------------ | ------------------------------------------ |
| 1 | \[2.15 WAL+Snapshot]        | `wal_snapshot`   | ‚Üí \[1.6 Tiered Storage / NVMe SSD]       | `tiered_storage`   | –•—Ä–∞–Ω–µ–Ω–∏–µ WAL –∏ snapshot –Ω–∞ NVMe            |
| 2 | \[2.15 WAL+Snapshot]        | `wal_snapshot`   | ‚Üí \[2.1 MVCC / Snapshot Isolation]       | `mvcc_snapshot`    | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ chain-–≤–µ—Ä—Å–∏–π –∏–∑ snapshot    |
| 3 | \[2.15 WAL+Snapshot]        | `wal_snapshot`   | ‚Üí \[2.10 Failover / Multi-node Recovery] | `failover_engine`  | –ü–µ—Ä–µ–¥–∞—á–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —É–∑–ª–∞ |
| 4 | \[2.15 WAL+Snapshot]        | `wal_snapshot`   | ‚Üí \[2.8 Snapshot Manager]                | `snapshot_manager` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º snapshot, delta-chain   |
| 5 | \[7.1 –ú–µ—Ç—Ä–∏–∫–∏ / Monitoring] | `metrics_engine` | ‚Üê \[2.15 WAL+Snapshot]                   | `wal_snapshot`     | –ú–µ—Ç—Ä–∏–∫–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏, latencies recovery   |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)             | ID –±–ª–æ–∫–∞             | ‚Üí –ö—É–¥–∞ (`[2.15 WAL+Snapshot]`) | ID –±–ª–æ–∫–∞       | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                             |
| - | ----------------------------- | -------------------- | ------------------------------ | -------------- | ------------------------------------------------------- |
| 1 | \[0.5 –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞–ø—É—Å–∫–∞]     | `startup_controller` | ‚Üí \[2.15 WAL+Snapshot]         | `wal_snapshot` | –ó–∞–≥—Ä—É–∑–∫–∞ snapshot –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ                            |
| 2 | \[2.2 Transaction Table]      | `tx_table`           | ‚Üí \[2.15 WAL+Snapshot]         | `wal_snapshot` | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π COMMIT/ROLLBACK                     |
| 3 | \[2.7 Transaction Manager]    | `tx_manager`         | ‚Üí \[2.15 WAL+Snapshot]         | `wal_snapshot` | –í—ã–∑–æ–≤ flush WAL –∏ —Å–Ω–∏–º–∫–∞ –ø—Ä–∏ CHECKPOINT                 |
| 4 | \[2.8 Snapshot Manager]       | `snapshot_manager`   | ‚Üí \[2.15 WAL+Snapshot]         | `wal_snapshot` | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è snapshot                           |
| 5 | \[2.9 –†–µ–ø–ª–∏–∫–∞—Ü–∏—è / Consensus] | `replication_engine` | ‚Üí \[2.15 WAL+Snapshot]         | `wal_snapshot` | –ü–µ—Ä–µ–¥–∞—á–∞ WAL-–¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Ä–µ–ø–ª–∏–∫–∏ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ snapshot |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ WAL**: —É—Ç–≤–µ—Ä–¥–∏–ª diff-based –ø–æ–¥—Ö–æ–¥, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é, –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ WAL writers.
* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ MVCC**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ chain –ø–æ snapshot –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏.
* **–ò–Ω–∂–µ–Ω–µ—Ä –ø–æ HA/DR**: –æ—Ç–º–µ—Ç–∏–ª —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å instant recovery —Å failover –ª–æ–≥–∏–∫–æ–π.
* **DevOps-–∏–Ω–∂–µ–Ω–µ—Ä**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –ø–æ–¥–¥–µ—Ä–∂–∫—É cold-start recovery < 200 –º—Å.
* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: –æ—Ç–º–µ—Ç–∏–ª –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è snapshot –∏ WAL.

---

‚úÖ –ë–ª–æ–∫ \[2.15] (`wal_snapshot`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É:
**\[2.16 –£—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏: RC, RR, SI, SERIALIZABLE]** (`isolation_levels`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.16 –£—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏: RC, RR, SI, SERIALIZABLE]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `isolation_levels`

> ‚úÖ –ë–ª–æ–∫ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é **—á–µ—Ç—ã—Ä—ë—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π –∏–∑–æ–ª—è—Ü–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**:
> ‚Äî **Read Committed (RC)**: –≤–∏–¥–∏–º–æ—Å—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
> ‚Äî **Repeatable Read (RR)**: —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è snapshot –Ω–∞ –≤—Ä–µ–º—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
> ‚Äî **Snapshot Isolation (SI)**: —Ä–∞–±–æ—Ç–∞ —Å MVCC chain, –∑–∞—â–∏—Ç–∞ –æ—Ç write skew
> ‚Äî **Serializable (SER)**: –ø—Å–µ–≤–¥–æ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ conflict detection –∏ fallback
> ‚Äî –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —É—Ä–æ–≤–µ–Ω—å –∏–∑–æ–ª—è—Ü–∏–∏ –≤ `BEGIN TRANSACTION ISOLATION LEVEL ...`
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MVCC, lock manager, planner, –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä–æ–º

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                | ID –±–ª–æ–∫–∞           | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                           | ID –±–ª–æ–∫–∞           | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                                         |
| - | -------------------------------- | ------------------ | ------------------------------------------- | ------------------ | ------------------------------------------------------------------- |
| 1 | \[2.16 Isolation Levels]         | `isolation_levels` | ‚Üí \[2.1 MVCC / Snapshot Isolation]          | `mvcc_snapshot`    | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç snapshot visibility –¥–ª—è SI/RR                            |
| 2 | \[2.16 Isolation Levels]         | `isolation_levels` | ‚Üí \[2.2 Transaction Table]                  | `tx_table`         | –•—Ä–∞–Ω–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –∏–∑–æ–ª—è—Ü–∏–∏ –∫–∞–∂–¥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏                          |
| 3 | \[2.16 Isolation Levels]         | `isolation_levels` | ‚Üí \[3.2 SQL Planner / Join Order Optimizer] | `sql_planner`      | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ –ø–ª–∞–Ω–∞: –ø–æ–≤–µ–¥–µ–Ω–∏–µ JOIN –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —É—Ä–æ–≤–Ω—è |
| 4 | \[2.16 Isolation Levels]         | `isolation_levels` | ‚Üí \[2.7 Transaction Manager]                | `tx_manager`       | –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤, –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏                  |
| 5 | \[6.2 –ê—É–¥–∏—Ç / Security / Policy] | `audit_engine`     | ‚Üê \[2.16 Isolation Levels]                  | `isolation_levels` | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–º–µ–Ω—ã —É—Ä–æ–≤–Ω—è, –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤, –Ω–∞—Ä—É—à–µ–Ω–∏–π                     |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                                | ID –±–ª–æ–∫–∞             | ‚Üí –ö—É–¥–∞ (`[2.16 Isolation Levels]`) | ID –±–ª–æ–∫–∞           | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                         |
| - | ------------------------------------------------ | -------------------- | ---------------------------------- | ------------------ | --------------------------------------------------- |
| 1 | \[2.7 Transaction Manager]                       | `tx_manager`         | ‚Üí \[2.16 Isolation Levels]         | `isolation_levels` | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç —É—Ä–æ–≤–µ–Ω—å –∏–∑–æ–ª—è—Ü–∏–∏          |
| 2 | \[3.1 SQL Parser / Syntax Tree]                  | `sql_parser`         | ‚Üí \[2.16 Isolation Levels]         | `isolation_levels` | –†–∞—Å–ø–æ–∑–Ω–∞—ë—Ç `ISOLATION LEVEL` –≤ BEGIN TRANSACTION    |
| 3 | \[0.5 –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞–ø—É—Å–∫–∞]                        | `startup_controller` | ‚Üí \[2.16 Isolation Levels]         | `isolation_levels` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑–æ–ª—è—Ü–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é    |
| 4 | \[2.1 MVCC / Snapshot Isolation]                 | `mvcc_snapshot`      | ‚Üí \[2.16 Isolation Levels]         | `isolation_levels` | –ü–µ—Ä–µ–¥–∞—ë—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∑–∞–ø–∏—Å–µ–π             |
| 5 | \[10.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã / Concurrency Tests] | `integration_tests`  | ‚Üí \[2.16 Isolation Levels]         | `isolation_levels` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è RC/RR/SI/SERIALIZABLE –ø—Ä–∏ –≥–æ–Ω–∫–∞—Ö |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –ø–æ–ª–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É ACID —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å MVCC.
* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ MVCC**: —É—Ç–≤–µ—Ä–¥–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É snapshot visibility –∏ chain traversal.
* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –≤–ª–∏—è–Ω–∏–µ –∏–∑–æ–ª—è—Ü–∏–∏ –Ω–∞ JOIN reorder.
* **–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫ –°–£–ë–î**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö –∞–Ω–æ–º–∞–ª–∏–π (phantom read, lost update –∏ —Ç.–¥.)
* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: –æ—Ç–º–µ—Ç–∏–ª –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏.

---

‚úÖ –ë–ª–æ–∫ \[2.16] (`isolation_levels`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É:
**\[2.17 Lock Manager / Deadlock Detector]** (`lock_manager`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.17 Lock Manager / Deadlock Detector]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `lock_manager`

> ‚úÖ –ë–ª–æ–∫ —Ä–µ–∞–ª–∏–∑—É–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏ (`locks`) –∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –≤–∑–∞–∏–º–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ (`deadlocks`):
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **shared / exclusive / intention locks** –Ω–∞ –æ–±—ä–µ–∫—Ç—ã: —Ç–∞–±–ª–∏—Ü—ã, —Å—Ç—Ä–æ–∫–∏, –∏–Ω–¥–µ–∫—Å—ã
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MVCC –∏ —É—Ä–æ–≤–Ω–µ–º –∏–∑–æ–ª—è—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, SERIALIZABLE —Ç—Ä–µ–±—É–µ—Ç lock enforcement)
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **lock escalation**, —Ç–∞–π–º–∞—É—Ç–æ–≤ –æ–∂–∏–¥–∞–Ω–∏—è, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
> ‚Äî –§–æ–Ω–æ–≤—ã–π **deadlock detector** —Å –∂—É—Ä–Ω–∞–ª–æ–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∏ –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏ –æ—Ç–∫–∞—Ç–∞
> ‚Äî –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è **lock graph –º–æ–¥–µ–ª—å**, –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)            | ID –±–ª–æ–∫–∞       | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)             | ID –±–ª–æ–∫–∞           | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                                    |
| - | ---------------------------- | -------------- | ----------------------------- | ------------------ | -------------------------------------------------------------- |
| 1 | \[2.17 Lock Manager]         | `lock_manager` | ‚Üí \[2.2 Transaction Table]    | `tx_table`         | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π                     |
| 2 | \[2.17 Lock Manager]         | `lock_manager` | ‚Üí \[2.7 Transaction Manager]  | `tx_manager`       | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏ –ø—Ä–∏ COMMIT/ROLLBACK                    |
| 3 | \[2.17 Lock Manager]         | `lock_manager` | ‚Üí \[2.16 Isolation Levels]    | `isolation_levels` | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç—Ä–æ–≥–∏—Ö —É—Ä–æ–≤–Ω–µ–π –∏–∑–æ–ª—è—Ü–∏–∏, —Ç—Ä–µ–±—É—é—â–∏—Ö —è–≤–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ |
| 4 | \[2.17 Lock Manager]         | `lock_manager` | ‚Üí \[7.1 –ú–µ—Ç—Ä–∏–∫–∏ / Monitoring] | `metrics_engine`   | –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫, –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∏ —Ç–∞–π–º–∞—É—Ç–æ–≤          |
| 5 | \[6.2 –ê—É–¥–∏—Ç / Access Policy] | `audit_engine` | ‚Üê \[2.17 Lock Manager]        | `lock_manager`     | –ñ—É—Ä–Ω–∞–ª–∏–∑–∞—Ü–∏—è deadlock —Å–æ–±—ã—Ç–∏–π, –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫       |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                        | ID –±–ª–æ–∫–∞            | ‚Üí –ö—É–¥–∞ (`[2.17 Lock Manager]`) | ID –±–ª–æ–∫–∞       | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                     |
| - | ---------------------------------------- | ------------------- | ------------------------------ | -------------- | ----------------------------------------------- |
| 1 | \[2.7 Transaction Manager]               | `tx_manager`        | ‚Üí \[2.17 Lock Manager]         | `lock_manager` | –ò–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç lock/unlock –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π           |
| 2 | \[2.16 Isolation Levels]                 | `isolation_levels`  | ‚Üí \[2.17 Lock Manager]         | `lock_manager` | –¢—Ä–µ–±—É–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø—Ä–∏ SERIALIZABLE —É—Ä–æ–≤–Ω–µ      |
| 3 | \[5.1 Table Catalog]                     | `table_catalog`     | ‚Üí \[2.17 Lock Manager]         | `lock_manager` | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç—ã –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫: —Ç–∞–±–ª–∏—Ü—ã, –∏–Ω–¥–µ–∫—Å—ã |
| 4 | \[3.2 SQL Planner / Optimizer]           | `sql_planner`       | ‚Üí \[2.17 Lock Manager]         | `lock_manager` | –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç lock hints –∏ prelocks    |
| 5 | \[10.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã / Deadlocks] | `integration_tests` | ‚Üí \[2.17 Lock Manager]         | `lock_manager` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∑–∞–∏–º–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫          |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ lock graph model.
* **–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**: —É—Ç–≤–µ—Ä–¥–∏–ª –ø—Ä–∞–≤–∏–ª–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∏ –ø–æ–ª–∏—Ç–∏–∫ –æ—Ç–∫–∞—Ç–æ–≤.
* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ MVCC**: –æ—Ç–º–µ—Ç–∏–ª –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å chain visibility –∏ lock compatibility.
* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –ø–µ—Ä–µ–¥–∞—á—É lock hints –≤ runtime.
* **–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫ –°–£–ë–î**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ deadlocks.

---

‚úÖ –ë–ª–æ–∫ \[2.17] (`lock_manager`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É:
**\[2.18 Replication Engine / Active-Active HA]** (`replication_engine`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.18 Replication Engine / Active-Active HA]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `replication_engine`

> ‚úÖ –ë–ª–æ–∫ —Ä–µ–∞–ª–∏–∑—É–µ—Ç **–º–µ—Ö–∞–Ω–∏–∑–º —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –∏ –≤—ã—Å–æ–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (HA)**:
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ–∂–∏–º–æ–≤: **active-active**, **active-passive**, **multi-region**
> ‚Äî –†–µ–ø–ª–∏–∫–∞—Ü–∏—è WAL, snapshot, DDL –∏ —Å–ª—É–∂–µ–±–Ω—ã—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
> ‚Äî –ü—Ä–æ—Ç–æ–∫–æ–ª —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è: **Raft / Paxos** –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—É—Ç–µ–π
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–¥–µ—Ä–∂–∫–∏, backpressure, topology reconfiguration
> ‚Äî –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–∞—Å—Ç–µ—Ä–∞, –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å, quorum-based commit
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CDC / Changefeed, failover, recovery

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                | ID –±–ª–æ–∫–∞             | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                     | ID –±–ª–æ–∫–∞             | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                          |
| - | -------------------------------- | -------------------- | ------------------------------------- | -------------------- | ---------------------------------------------------- |
| 1 | \[2.18 Replication Engine]       | `replication_engine` | ‚Üí \[2.15 WAL + Snapshot + Recovery]   | `wal_snapshot`       | –†–µ–ø–ª–∏–∫–∞—Ü–∏—è WAL –∏ snapshot –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ —É–∑–ª–µ |
| 2 | \[2.18 Replication Engine]       | `replication_engine` | ‚Üí \[2.10 Failover / Recovery Manager] | `failover_engine`    | –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–∫–∞–∑–æ–≤ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–æ–π –Ω–æ–¥–µ    |
| 3 | \[2.18 Replication Engine]       | `replication_engine` | ‚Üí \[8.1 Streaming Layer / Changefeed] | `streaming_layer`    | –ü—É–±–ª–∏–∫–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ª–æ–≥–∏—á–µ—Å–∫—É—é CDC                |
| 4 | \[2.18 Replication Engine]       | `replication_engine` | ‚Üí \[9.3 Consensus / Raft Coordinator] | `consensus_engine`   | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º Raft/Paxos –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è      |
| 5 | \[6.2 –ê—É–¥–∏—Ç / Security / Policy] | `audit_engine`       | ‚Üê \[2.18 Replication Engine]          | `replication_engine` | –ê—É–¥–∏—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –∏ quorum voting          |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                      | ID –±–ª–æ–∫–∞             | ‚Üí –ö—É–¥–∞ (`[2.18 Replication Engine]`) | ID –±–ª–æ–∫–∞             | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                      |
| - | -------------------------------------- | -------------------- | ------------------------------------ | -------------------- | ------------------------------------------------ |
| 1 | \[2.15 WAL + Snapshot + Recovery]      | `wal_snapshot`       | ‚Üí \[2.18 Replication Engine]         | `replication_engine` | –û—Ç–ø—Ä–∞–≤–∫–∞ WAL –∏ snapshot –Ω–∞ —Ä–µ–ø–ª–∏–∫–∏               |
| 2 | \[2.10 Failover / Multi-node Recovery] | `failover_engine`    | ‚Üí \[2.18 Replication Engine]         | `replication_engine` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–ø–æ–ª–æ–≥–∏–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ –ø–æ—Å–ª–µ —Å–±–æ—è         |
| 3 | \[0.5 –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞–ø—É—Å–∫–∞]              | `startup_controller` | ‚Üí \[2.18 Replication Engine]         | `replication_engine` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–æ–ø–æ–ª–æ–≥–∏–∏ –∏ —Å–≤—è–∑–µ–π                 |
| 4 | \[2.7 Transaction Manager]             | `tx_manager`         | ‚Üí \[2.18 Replication Engine]         | `replication_engine` | –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π |
| 5 | \[10.4 HA / Replication Tests]         | `testing_ha`         | ‚Üí \[2.18 Replication Engine]         | `replication_engine` | –ü—Ä–æ–≤–µ—Ä–∫–∞ failover, split-brain, quorum loss      |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–ò–Ω–∂–µ–Ω–µ—Ä –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ (HA)**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –ø–æ–¥–¥–µ—Ä–∂–∫—É quorum –∏ master re-election.
* **DevOps-–∏–Ω–∂–µ–Ω–µ—Ä**: —É—Ç–≤–µ—Ä–¥–∏–ª –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é —Å–º–µ–Ω—É —Ç–æ–ø–æ–ª–æ–≥–∏–∏ –±–µ–∑ downtime.
* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É –Ω–æ–¥–∞–º–∏ (Raft-based commit).
* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**: –æ—Ç–º–µ—Ç–∏–ª —Å–≤—è–∑—å —Å Changefeed / CDC / –ª–æ–≥–∞–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π.
* **–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫ –°–£–ë–î**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª —Å–∏–º—É–ª—è—Ü–∏—é —Å–±–æ–µ–≤ –∏ split-brain detection.

---

‚úÖ –ë–ª–æ–∫ \[2.18] (`replication_engine`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É:
**\[2.19 Consensus Engine / Raft Coordinator]** (`consensus_engine`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.19 Consensus Engine / Raft Coordinator]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `consensus_engine`

> ‚úÖ –ë–ª–æ–∫ —Ä–µ–∞–ª–∏–∑—É–µ—Ç **–º–µ—Ö–∞–Ω–∏–∑–º –∫–æ–Ω—Å–µ–Ω—Å—É—Å–∞ –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ —É–∑–ª–æ–≤**, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ **–ø—Ä–æ—Ç–æ–∫–æ–ª–∞—Ö Raft / Paxos**:
> ‚Äî –í—ã–±–æ—Ä –ª–∏–¥–µ—Ä–∞, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–≤–æ—Ä—É–º–∞ (quorum-based voting)
> ‚Äî –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –ª–æ–≥–∞ –∏ –∫–æ–º–∞–Ω–¥ —á–µ—Ä–µ–∑ consensus log
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ commit index
> ‚Äî –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ–≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è, split-brain, network partition
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å WAL, Failover Engine –∏ Transaction Manager
> ‚Äî –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, DDL –∏ snapshot

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                | ID –±–ª–æ–∫–∞           | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                        | ID –±–ª–æ–∫–∞             | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                             |
| - | -------------------------------- | ------------------ | ---------------------------------------- | -------------------- | ------------------------------------------------------- |
| 1 | \[2.19 Consensus Engine]         | `consensus_engine` | ‚Üí \[2.18 Replication Engine]             | `replication_engine` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∏–¥–µ—Ä—Å—Ç–≤–æ–º –∏ —Ä–µ—à–µ–Ω–∏–µ–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤             |
| 2 | \[2.19 Consensus Engine]         | `consensus_engine` | ‚Üí \[2.15 WAL + Snapshot + Recovery]      | `wal_snapshot`       | –†–µ–ø–ª–∏–∫–∞—Ü–∏—è log entries –≤ WAL                            |
| 3 | \[2.19 Consensus Engine]         | `consensus_engine` | ‚Üí \[2.10 Failover / Multi-node Recovery] | `failover_engine`    | –ò–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π –ø–æ—Å–ª–µ –æ—Ç–∫–∞–∑–∞              |
| 4 | \[2.19 Consensus Engine]         | `consensus_engine` | ‚Üí \[2.2 Transaction Table]               | `tx_table`           | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ—Å–ª–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∫–æ–Ω—Å–µ–Ω—Å—É—Å–∞    |
| 5 | \[6.2 –ê—É–¥–∏—Ç / Security / Policy] | `audit_engine`     | ‚Üê \[2.19 Consensus Engine]               | `consensus_engine`   | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π, –ø–µ—Ä–µ–≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π, quorum-—Ñ–µ–π–ª–æ–≤ |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                 | ID –±–ª–æ–∫–∞             | ‚Üí –ö—É–¥–∞ (`[2.19 Consensus Engine]`) | ID –±–ª–æ–∫–∞           | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                      |
| - | --------------------------------- | -------------------- | ---------------------------------- | ------------------ | ------------------------------------------------ |
| 1 | \[2.18 Replication Engine]        | `replication_engine` | ‚Üí \[2.19 Consensus Engine]         | `consensus_engine` | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Raft –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è |
| 2 | \[2.7 Transaction Manager]        | `tx_manager`         | ‚Üí \[2.19 Consensus Engine]         | `consensus_engine` | –ò–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–π commit —á–µ—Ä–µ–∑ Raft          |
| 3 | \[2.15 WAL + Snapshot + Recovery] | `wal_snapshot`       | ‚Üí \[2.19 Consensus Engine]         | `consensus_engine` | –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è             |
| 4 | \[0.5 –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞–ø—É—Å–∫–∞]         | `startup_controller` | ‚Üí \[2.19 Consensus Engine]         | `consensus_engine` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Raft cluster –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ            |
| 5 | \[10.4 HA / Replication Tests]    | `testing_ha`         | ‚Üí \[2.19 Consensus Engine]         | `consensus_engine` | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ failover –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ  |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º —Å–∏—Å—Ç–µ–º–∞–º**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å Raft-—Å–µ–º–∞–Ω—Ç–∏–∫–∏.
* **–ò–Ω–∂–µ–Ω–µ—Ä –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ (HA)**: —É—Ç–≤–µ—Ä–¥–∏–ª –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ split-brain –∏ network partition.
* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ WAL**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ log entry –º–µ–∂–¥—É –Ω–æ–¥–∞–º–∏.
* **DevOps-–∏–Ω–∂–µ–Ω–µ—Ä**: –æ—Ç–º–µ—Ç–∏–ª –Ω–∞–ª–∏—á–∏–µ –º–µ—Ç—Ä–∏–∫ –ª–∏–¥–µ—Ä—Å—Ç–≤–∞ –∏ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞.
* **–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –°–£–ë–î**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª, —á—Ç–æ –≤—Å–µ DDL –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ consensus.

---

‚úÖ –ë–ª–æ–∫ \[2.19] (`consensus_engine`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É:
**\[2.20 Background Vacuum / Garbage Collection]** (`vacuum_engine`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.20 Background Vacuum / Garbage Collection]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `vacuum_engine`

> ‚úÖ –ë–ª–æ–∫ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ **—Ñ–æ–Ω–æ–≤—É—é –æ—á–∏—Å—Ç–∫—É —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –≤–µ—Ä—Å–∏–π –¥–∞–Ω–Ω—ã—Ö**, –∞ —Ç–∞–∫–∂–µ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º MVCC-—Ü–µ–ø–æ—á–µ–∫ –∏ —Å–ª—É–∂–µ–±–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä:
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **background vacuum**: —Å–∫–∞–Ω–∏—Ä—É–µ—Ç MVCC —Ü–µ–ø–æ—á–∫–∏, —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏
> ‚Äî –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏, –¥–µ—Ç–∞—á –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü, –≤–æ–∑–≤—Ä–∞—Ç –≤ allocator
> ‚Äî –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü, rollback-–¥–∞–Ω–Ω—ã—Ö, orphan-–æ–±—ä–µ–∫—Ç–æ–≤
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ threshold-based, incremental –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ vacuum
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å snapshot manager, WAL, TTL, eviction, session context

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)           | ID –±–ª–æ–∫–∞         | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                       | ID –±–ª–æ–∫–∞           | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                            |
| - | --------------------------- | ---------------- | --------------------------------------- | ------------------ | ------------------------------------------------------ |
| 1 | \[2.20 Background Vacuum]   | `vacuum_engine`  | ‚Üí \[2.1 MVCC / Snapshot Isolation]      | `mvcc_snapshot`    | –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π –∑–∞–ø–∏—Å–µ–π                         |
| 2 | \[2.20 Background Vacuum]   | `vacuum_engine`  | ‚Üí \[1.12 Allocator / Memory Management] | `allocator_engine` | –í–æ–∑–≤—Ä–∞—Ç –æ—Å–≤–æ–±–æ–∂–¥—ë–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏                           |
| 3 | \[2.20 Background Vacuum]   | `vacuum_engine`  | ‚Üí \[2.15 WAL + Snapshot + Recovery]     | `wal_snapshot`     | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ checkpoint / cleanup logs                   |
| 4 | \[2.20 Background Vacuum]   | `vacuum_engine`  | ‚Üí \[1.13 TTL / Auto Eviction Engine]    | `ttl_eviction`     | –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ TTL                                  |
| 5 | \[7.1 –ú–µ—Ç—Ä–∏–∫–∏ / Monitoring] | `metrics_engine` | ‚Üê \[2.20 Background Vacuum]             | `vacuum_engine`    | –û—Ç—á—ë—Ç –ø–æ GC: latency, reclaimed bytes, –æ–±—ä–µ–∫—Ç–æ–≤, pages |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                  | ID –±–ª–æ–∫–∞            | ‚Üí –ö—É–¥–∞ (`[2.20 Background Vacuum]`) | ID –±–ª–æ–∫–∞        | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                       |
| - | ---------------------------------- | ------------------- | ----------------------------------- | --------------- | ------------------------------------------------- |
| 1 | \[2.1 MVCC / Snapshot Isolation]   | `mvcc_snapshot`     | ‚Üí \[2.20 Background Vacuum]         | `vacuum_engine` | –£–∫–∞–∑—ã–≤–∞–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ü–µ–ø–æ—á–∫–∏ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ          |
| 2 | \[2.15 WAL + Snapshot + Recovery]  | `wal_snapshot`      | ‚Üí \[2.20 Background Vacuum]         | `vacuum_engine` | –ü–µ—Ä–µ–¥–∞—ë—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö     |
| 3 | \[2.7 Transaction Manager]         | `tx_manager`        | ‚Üí \[2.20 Background Vacuum]         | `vacuum_engine` | –°–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –≤—ã–∑—ã–≤–∞–µ—Ç GC |
| 4 | \[1.13 TTL / Auto Eviction Engine] | `ttl_eviction`      | ‚Üí \[2.20 Background Vacuum]         | `vacuum_engine` | –û—á–∏—Å—Ç–∫–∞ —Å—Ç—Ä–æ–∫ —Å –∏—Å—Ç–µ–∫—à–∏–º TTL                      |
| 5 | \[10.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã / GC]  | `integration_tests` | ‚Üí \[2.20 Background Vacuum]         | `vacuum_engine` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—á–∏—Å—Ç–∫–∏, reclaim –ø–æ–≤–µ–¥–µ–Ω–∏—è, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ MVCC**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å traversal –∏ unlink –ª–æ–≥–∏–∫–∏.
* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –ø–∞–º—è—Ç—å—é**: —É—Ç–≤–µ—Ä–¥–∏–ª reclaim —Å—Ç—Ä–∞–Ω–∏—Ü –∏ –ø–∞–º—è—Ç—å allocator-aware.
* **–ò–Ω–∂–µ–Ω–µ—Ä –ø–æ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª, —á—Ç–æ vacuum –Ω–µ –Ω–∞—Ä—É—à–∞–µ—Ç snapshot visibility.
* **DevOps-–∏–Ω–∂–µ–Ω–µ—Ä**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–∞—É–∑ –∏ degradations –ø—Ä–∏ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–π GC.
* **–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫ –°–£–ë–î**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö edge-cases (long TX, rollback, orphan chains).

---

‚úÖ –ë–ª–æ–∫ \[2.20] (`vacuum_engine`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É:
**\[2.21 Transaction Hooks / Extensions]** (`tx_hooks`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.21 Transaction Hooks / Extensions]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `tx_hooks`

> ‚úÖ –ë–ª–æ–∫ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º **—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** —á–µ—Ä–µ–∑ **hooks, callbacks –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏**:
> ‚Äî –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ `BEFORE COMMIT`, `AFTER COMMIT`, `BEFORE ROLLBACK` –∏ `AFTER ROLLBACK` —Ö—É–∫–æ–≤
> ‚Äî –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞—É–¥–∏—Ç–∞, —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –∏ –¥—Ä—É–≥–∏—Ö —Ü–µ–ª–µ–π
> ‚Äî –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —è–¥—Ä–∞ –±–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–∞—Ç–∏–≤–Ω—ã—Ö —Ö—É–∫–æ–≤ –Ω–∞ C / C++, Lua, WASM
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º, audit engine, UDF runtime

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)           | ID –±–ª–æ–∫–∞         | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                       | ID –±–ª–æ–∫–∞       | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                                   |
| - | --------------------------- | ---------------- | --------------------------------------- | -------------- | ------------------------------------------------------------- |
| 1 | \[2.21 Transaction Hooks]   | `tx_hooks`       | ‚Üí \[2.7 Transaction Manager]            | `tx_manager`   | –ü–µ—Ä–µ–¥–∞—á–∞ callback-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è COMMIT / ROLLBACK          |
| 2 | \[2.21 Transaction Hooks]   | `tx_hooks`       | ‚Üí \[6.2 Audit / Policy / Access Engine] | `audit_engine` | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–ø–∏—Å–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π –∏ –ø–æ–ª–∏—Ç–∏–∫   |
| 3 | \[2.21 Transaction Hooks]   | `tx_hooks`       | ‚Üí \[9.1 UDF / UDAF Runtime]             | `udf_runtime`  | –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å Lua/WASM callbacks                 |
| 4 | \[2.21 Transaction Hooks]   | `tx_hooks`       | ‚Üí \[3.5 Procedure Engine / DSL Runtime] | `dsl_engine`   | –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –º–æ–≥—É—Ç –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ commit / rollback |
| 5 | \[7.1 –ú–µ—Ç—Ä–∏–∫–∏ / Monitoring] | `metrics_engine` | ‚Üê \[2.21 Transaction Hooks]             | `tx_hooks`     | –ú–µ—Ç—Ä–∏–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –≤—Ä–µ–º–µ–Ω–∏ —Ö—É–∫–æ–≤                            |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                     | ID –±–ª–æ–∫–∞       | ‚Üí –ö—É–¥–∞ (`[2.21 Transaction Hooks]`) | ID –±–ª–æ–∫–∞   | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                     |
| - | ------------------------------------- | -------------- | ----------------------------------- | ---------- | ----------------------------------------------- |
| 1 | \[2.7 Transaction Manager]            | `tx_manager`   | ‚Üí \[2.21 Transaction Hooks]         | `tx_hooks` | –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç —Ö—É–∫–∏ –≤ —Ñ–∞–∑–∞—Ö commit / rollback       |
| 2 | \[9.1 UDF / UDAF Runtime]             | `udf_runtime`  | ‚Üí \[2.21 Transaction Hooks]         | `tx_hooks` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è UDF-—Ö—É–∫–æ–≤ –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏              |
| 3 | \[6.2 Audit / Policy / Access Engine] | `audit_engine` | ‚Üí \[2.21 Transaction Hooks]         | `tx_hooks` | –•—É–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–ª–∏—Ç–∏–∫ –∏ –∞—É–¥–∏—Ç–∞          |
| 4 | \[3.5 Procedure Engine / DSL Runtime] | `dsl_engine`   | ‚Üí \[2.21 Transaction Hooks]         | `tx_hooks` | –°—Ü–µ–Ω–∞—Ä–∏–∏ –Ω–∞ SQL / DSL –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ —Ö—É–∫–∏     |
| 5 | \[10.3 UDF/Hook Testing]              | `testing_udf`  | ‚Üí \[2.21 Transaction Hooks]         | `tx_hooks` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–∑–æ–≤–∞ —Ö—É–∫–æ–≤, rollback –∏ commit –ª–æ–≥–∏–∫–∏ |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Ñ–∞–∑ commit/rollback.
* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ UDF**: –æ—Ç–º–µ—Ç–∏–ª –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ sandbox-–æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è Lua/WASM —Ö—É–∫–æ–≤.
* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ö—É–∫–æ–≤ —á–µ—Ä–µ–∑ access policy engine.
* **–ò–Ω–∂–µ–Ω–µ—Ä –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö—É–∫–∏ –¥–ª—è ERP –∏ –≤–Ω–µ—à–Ω–∏—Ö API.
* **–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫ –°–£–ë–î**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

---

‚úÖ –ë–ª–æ–∫ \[2.21] (`tx_hooks`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É:
**\[2.22 Transaction Time / AS OF Queries]** (`tx_time_queries`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.22 Transaction Time / AS OF Queries]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `tx_time_queries`

> ‚úÖ –ë–ª–æ–∫ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É **–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (`AS OF`) –∏ —Å–∏—Å—Ç–µ–º–Ω–æ–π –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç–∏ (`SYSTEM VERSIONED`)**:
> ‚Äî –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –º–æ–º–µ–Ω—Ç `T` (snapshot time)
> ‚Äî –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞—É–¥–∏—Ç–∞, —Ä–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞, –∫–æ–º–ø–ª–∞–µ–Ω—Å–∞
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `SYSTEM VERSIONED` —Ç–∞–±–ª–∏—Ü —Å –ø–æ–ª—è–º–∏ `valid_from` / `valid_to`
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MVCC snapshot-–≤–∏–¥–∏–º–æ—Å—Ç—å—é, garbage collection
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ SQL —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–µ: `SELECT ... FROM table AS OF TIMESTAMP '...'`
> ‚Äî –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º SQL:2011 –∏ ANSI temporal features

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                | ID –±–ª–æ–∫–∞          | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                      | ID –±–ª–æ–∫–∞          | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                                            |
| - | -------------------------------- | ----------------- | -------------------------------------- | ----------------- | ---------------------------------------------------------------------- |
| 1 | \[2.22 Transaction Time Queries] | `tx_time_queries` | ‚Üí \[2.1 MVCC / Snapshot Isolation]     | `mvcc_snapshot`   | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–Ω–∞–ø—à–æ—Ç—ã –∏ TID —Ü–µ–ø–æ—á–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ |
| 2 | \[2.22 Transaction Time Queries] | `tx_time_queries` | ‚Üí \[3.1 SQL Parser / Temporal Support] | `sql_parser`      | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ SQL-—Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ `AS OF TIMESTAMP`                             |
| 3 | \[2.22 Transaction Time Queries] | `tx_time_queries` | ‚Üí \[3.2 SQL Planner / Optimizer]       | `sql_planner`     | –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–ª–∞–Ω–∞ –ø–æ–¥ —Å–Ω–∞–ø—à–æ—Ç-–∑–∞–ø—Ä–æ—Å                                     |
| 4 | \[2.22 Transaction Time Queries] | `tx_time_queries` | ‚Üí \[5.1 Table Catalog]                 | `table_catalog`   | –¢–∞–±–ª–∏—Ü—ã —Å SYSTEM VERSIONED —Ä–∞–∑–º–µ—Ç–∫–æ–π                                   |
| 5 | \[6.2 Audit / Security / Policy] | `audit_engine`    | ‚Üê \[2.22 Transaction Time Queries]     | `tx_time_queries` | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º –¥–∞–Ω–Ω—ã–º                |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                    | ID –±–ª–æ–∫–∞           | ‚Üí –ö—É–¥–∞ (`[2.22 Transaction Time Queries]`) | ID –±–ª–æ–∫–∞          | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                                          |
| - | ------------------------------------ | ------------------ | ------------------------------------------ | ----------------- | -------------------------------------------------------------------- |
| 1 | \[3.1 SQL Parser / Temporal Support] | `sql_parser`       | ‚Üí \[2.22 Transaction Time Queries]         | `tx_time_queries` | –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏ –ø–∞—Ä—Å–∏–Ω–≥ `AS OF` –≤—ã—Ä–∞–∂–µ–Ω–∏–π                            |
| 2 | \[2.1 MVCC / Snapshot Isolation]     | `mvcc_snapshot`    | ‚Üí \[2.22 Transaction Time Queries]         | `tx_time_queries` | –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–Ω–∞–ø—à–æ—Ç–∞—Ö                          |
| 3 | \[5.1 Table Catalog]                 | `table_catalog`    | ‚Üí \[2.22 Transaction Time Queries]         | `tx_time_queries` | –£–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã —è–≤–ª—è—é—Ç—Å—è –≤–µ—Ä—Å–∏–æ–Ω–Ω—ã–º–∏                         |
| 4 | \[2.20 Background Vacuum / GC]       | `vacuum_engine`    | ‚Üí \[2.22 Transaction Time Queries]         | `tx_time_queries` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä–∞–Ω–∏—Ü —É–¥–∞–ª–µ–Ω–∏—è (–Ω–µ —É–¥–∞–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ `AS OF`) |
| 5 | \[10.6 Temporal / Time-Travel Tests] | `testing_temporal` | ‚Üí \[2.22 Transaction Time Queries]         | `tx_time_queries` | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ     |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –°–£–ë–î**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ SQL:2011 temporal extensions.
* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ MVCC**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –≤–∏–¥–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π –Ω–∞ `AS OF T`.
* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø–∞—Ä—Å–µ—Ä–∞**: –¥–æ–±–∞–≤–∏–ª –ø–æ–¥–¥–µ—Ä–∂–∫—É `AS OF` —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∏ temporal hints.
* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º –¥–∞–Ω–Ω—ã–º.
* **–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫ –°–£–ë–î**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –ø–æ–ª–Ω–æ—Ç—É –ø–æ–∫—Ä—ã—Ç–∏—è test-case –Ω–∞ time-travel –≤—ã–±–æ—Ä–∫–∏.

---

‚úÖ –ë–ª–æ–∫ \[2.22] (`tx_time_queries`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É:
**\[2.23 Transaction Throttling / Admission Control]** (`tx_throttle`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.23 Transaction Throttling / Admission Control]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `tx_throttle`

> ‚úÖ –ë–ª–æ–∫ —Ä–µ–∞–ª–∏–∑—É–µ—Ç **–∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–≥—Ä—É–∑–∫–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**, –≤–∫–ª—é—á–∞—è –ø–æ–ª–∏—Ç–∏–∫—É –¥–æ–ø—É—Å–∫–∞ (admission policy):
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º –∏ —Ç–∏–ø–∞–º
> ‚Äî –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ—á–µ—Ä–µ–¥–µ–π (transaction queue), fair scheduling
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–∞–≤–∏–ª: –ø–æ IP, —Ä–æ–ª–∏, –∏—Å—Ç–æ—á–Ω–∏–∫—É, –Ω–∞–≥—Ä—É–∑–∫–µ, CPU, IOPS
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å query scheduler, metrics engine –∏ policy engine
> ‚Äî –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏: backpressure, –æ—Ç–∫–∞–∑ —Å –∫–æ–¥–æ–º `RETRY LATER`
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å resource governor –∏ SLA-–ø—Ä–æ—Ñ–∏–ª—è–º–∏

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                | ID –±–ª–æ–∫–∞       | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                           | ID –±–ª–æ–∫–∞          | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                           |
| - | -------------------------------- | -------------- | ------------------------------------------- | ----------------- | ----------------------------------------------------- |
| 1 | \[2.23 Tx Throttling]            | `tx_throttle`  | ‚Üí \[2.7 Transaction Manager]                | `tx_manager`      | –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ admission policy |
| 2 | \[2.23 Tx Throttling]            | `tx_throttle`  | ‚Üí \[6.3 Access Policy Engine]               | `access_policy`   | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –ø–æ–ª–∏—Ç–∏–∫ –¥–æ—Å—Ç—É–ø–∞ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π      |
| 3 | \[2.23 Tx Throttling]            | `tx_throttle`  | ‚Üí \[7.1 –ú–µ—Ç—Ä–∏–∫–∏ / Monitoring]               | `metrics_engine`  | –ü—É–±–ª–∏–∫—É–µ—Ç latency, –æ—Ç–∫–∞–∑, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–∂–∏–¥–∞—é—â–∏—Ö        |
| 4 | \[2.23 Tx Throttling]            | `tx_throttle`  | ‚Üí \[8.2 Query Scheduler / Resource Manager] | `query_scheduler` | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º –∏ SLA        |
| 5 | \[6.2 Audit / Security / Policy] | `audit_engine` | ‚Üê \[2.23 Tx Throttling]                     | `tx_throttle`     | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–∞–∑–æ–≤ –∏ –∑–∞–¥–µ—Ä–∂–µ–∫ –ø–æ –ø—Ä–∏—á–∏–Ω–∞–º throttling |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                         | ID –±–ª–æ–∫–∞           | ‚Üí –ö—É–¥–∞ (`[2.23 Tx Throttling]`) | ID –±–ª–æ–∫–∞      | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                     |
| - | ----------------------------------------- | ------------------ | ------------------------------- | ------------- | ----------------------------------------------- |
| 1 | \[2.7 Transaction Manager]                | `tx_manager`       | ‚Üí \[2.23 Tx Throttling]         | `tx_throttle` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∞–∫—Ç–∏–≤–∞—Ü–∏–µ–π –Ω–æ–≤–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏      |
| 2 | \[6.3 Access Policy Engine]               | `access_policy`    | ‚Üí \[2.23 Tx Throttling]         | `tx_throttle` | –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
| 3 | \[8.2 Query Scheduler / Resource Manager] | `query_scheduler`  | ‚Üí \[2.23 Tx Throttling]         | `tx_throttle` | –û–±–Ω–æ–≤–ª—è–µ—Ç —Ç–µ–∫—É—â—É—é –Ω–∞–≥—Ä—É–∑–∫—É, —Å–∏–≥–Ω–∞–ª—ã –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫  |
| 4 | \[7.1 –ú–µ—Ç—Ä–∏–∫–∏ / Monitoring]               | `metrics_engine`   | ‚Üí \[2.23 Tx Throttling]         | `tx_throttle` | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–µ—Ç—Ä–∏–∫ –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –ª–∏–º–∏—Ç–æ–≤         |
| 5 | \[10.7 Load Throttling Tests]             | `testing_throttle` | ‚Üí \[2.23 Tx Throttling]         | `tx_throttle` | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–∞–∑–æ–≤, –∑–∞–¥–µ—Ä–∂–µ–∫, fairness –∏ SLA  |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ starvation –∏ race conditions.
* **DevOps-–∏–Ω–∂–µ–Ω–µ—Ä**: —É—Ç–≤–µ—Ä–¥–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –Ω–∞–≥—Ä—É–∑–∫–∏ –ø–æ–¥ –ø–∏–∫–æ–≤—ã–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏.
* **–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –°–£–ë–î**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º –∏ –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞.
* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –∏–∑–æ–ª—è—Ü–∏—é –ø–æ —Ä–æ–ª—è–º/IP.
* **–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫ –°–£–ë–î**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ 10K+ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

---

‚úÖ –ë–ª–æ–∫ \[2.23] (`tx_throttle`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É:
**\[2.24 Transaction Timeout / Deadlock Resolver]** (`tx_timeout`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.24 Transaction Timeout / Deadlock Resolver]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `tx_timeout`

> ‚úÖ –ë–ª–æ–∫ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ **–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∑–∞–≤–∏—Å—à–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –≤–∑–∞–∏–º–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ (deadlocks)** –∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –ø–æ —Ç–∞–π–º–∞—É—Ç—É:
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤ `statement_timeout`, `lock_timeout`, `idle_timeout`, `transaction_timeout`
> ‚Äî –ú–µ—Ö–∞–Ω–∏–∑–º –≤—ã—è–≤–ª–µ–Ω–∏—è —Ü–∏–∫–ª–æ–≤ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ (wait-for graph, timeout aging)
> ‚Äî –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ deadlock: –∂–µ—Ä—Ç–≤–∞ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É, –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º—É –ø—Ä–æ–≥—Ä–µ—Å—Å—É –∏–ª–∏ SLA
> ‚Äî –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ long-running —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç—É
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å lock manager, TX manager, –º–µ—Ç—Ä–∏–∫–∞–º–∏ –∏ audit engine
> ‚Äî –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–∏

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                | ID –±–ª–æ–∫–∞           | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                  | ID –±–ª–æ–∫–∞         | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                                            |
| - | -------------------------------- | ------------------ | ---------------------------------- | ---------------- | ---------------------------------------------------------------------- |
| 1 | \[2.24 Timeout / Deadlock]       | `tx_timeout`       | ‚Üí \[2.7 Transaction Manager]       | `tx_manager`     | –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–µ                          |
| 2 | \[2.24 Timeout / Deadlock]       | `tx_timeout`       | ‚Üí \[2.6 Lock Manager]              | `lock_manager`   | –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å—à–∏—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫                                           |
| 3 | \[2.24 Timeout / Deadlock]       | `tx_timeout`       | ‚Üí \[6.2 Audit / Security / Policy] | `audit_engine`   | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª—É—á–∞—è —Ç–∞–π–º–∞—É—Ç–∞ –∏–ª–∏ deadlock                               |
| 4 | \[2.24 Timeout / Deadlock]       | `tx_timeout`       | ‚Üí \[7.1 –ú–µ—Ç—Ä–∏–∫–∏ / Monitoring]      | `metrics_engine` | –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –ø–æ deadlocks, —Ç–∞–π–º–∞—É—Ç–∞–º, latency                           |
| 5 | \[10.8 Timeout / Deadlock Tests] | `testing_deadlock` | ‚Üê \[2.24 Timeout / Deadlock]       | `tx_timeout`     | –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ç–∞–π–º–∞—É—Ç–æ–≤ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                         | ID –±–ª–æ–∫–∞          | ‚Üí –ö—É–¥–∞ (`[2.24 Timeout / Deadlock]`) | ID –±–ª–æ–∫–∞     | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                           |
| - | ----------------------------------------- | ----------------- | ------------------------------------ | ------------ | ----------------------------------------------------- |
| 1 | \[2.6 Lock Manager]                       | `lock_manager`    | ‚Üí \[2.24 Timeout / Deadlock]         | `tx_timeout` | –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç wait-for graph –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏             |
| 2 | \[2.7 Transaction Manager]                | `tx_manager`      | ‚Üí \[2.24 Timeout / Deadlock]         | `tx_timeout` | –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, —Å–æ—Å—Ç–æ—è–Ω–∏—è           |
| 3 | \[7.1 –ú–µ—Ç—Ä–∏–∫–∏ / Monitoring]               | `metrics_engine`  | ‚Üí \[2.24 Timeout / Deadlock]         | `tx_timeout` | –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ SLA                 |
| 4 | \[6.3 Access Policy Engine]               | `access_policy`   | ‚Üí \[2.24 Timeout / Deadlock]         | `tx_timeout` | –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤ –ø–æ —Ä–æ–ª—è–º / —Ç–∏–ø–∞–º      |
| 5 | \[8.2 Query Scheduler / Resource Manager] | `query_scheduler` | ‚Üí \[2.24 Timeout / Deadlock]         | `tx_timeout` | –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ livelock –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤—ã–±–æ—Ä –∂–µ—Ä—Ç–≤—ã.
* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ lock manager**: —É—Ç–≤–µ—Ä–¥–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å wait-for graph.
* **DevOps-–∏–Ω–∂–µ–Ω–µ—Ä**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Ç–∞–π–º–∞—É—Ç–æ–≤ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π.
* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: –ø—Ä–æ–≤–µ—Ä–∏–ª, —á—Ç–æ —Ç–∞–π–º–∞—É—Ç—ã –Ω–µ –Ω–∞—Ä—É—à–∞—é—Ç –∏–∑–æ–ª—è—Ü–∏—é –∏ rollback.
* **–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫ –°–£–ë–î**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –ø–æ–∫—Ä—ã—Ç–∏–µ —Å–ª—É—á–∞–µ–≤ —Å nested, idle –∏ long-running TX.

---

‚úÖ –ë–ª–æ–∫ \[2.24] (`tx_timeout`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

–ù–∞–ø–∏—à–∏—Ç–µ **¬´–¥–∞¬ª**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É:
**\[2.25 Transaction Savepoints / Nested TX]** (`tx_savepoints`).

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

## üß± –ë–ª–æ–∫: **\[2.25 Transaction Savepoints / Nested TX]**

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:** `tx_savepoints`

> ‚úÖ –ë–ª–æ–∫ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É **—Ç–æ—á–µ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (`SAVEPOINT`) –∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**, –ø–æ–∑–≤–æ–ª—è—è —á–∞—Å—Ç–∏—á–Ω—ã–π `ROLLBACK TO` –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø–æ–¥–æ–ø–µ—Ä–∞—Ü–∏—è–º–∏:
> ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–∞–Ω–¥ `SAVEPOINT`, `ROLLBACK TO`, `RELEASE SAVEPOINT`
> ‚Äî –†–µ–∞–ª–∏–∑–∞—Ü–∏—è stack-based –º–æ–¥–µ–ª–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
> ‚Äî –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞—Ö, UDF, —Å–ª–æ–∂–Ω—ã—Ö DSL-–æ–ø–µ—Ä–∞—Ü–∏—è—Ö
> ‚Äî –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å rollback –±–µ–∑ –≤—ã—Ö–æ–¥–∞ –∏–∑ –≤—Å–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
> ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MVCC, lock manager, snapshot manager
> ‚Äî –£—á–µ—Ç savepoint –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–µ, –ª–æ–≥–∞—Ö, –∞—É–¥–∏—Ç-—Ç—Ä–µ–∫–∞—Ö

---

### üîÅ –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                     | ID –±–ª–æ–∫–∞        | ‚Üí –ö—É–¥–∞ (`[–ë–ª–æ–∫]`)                  | ID –±–ª–æ–∫–∞        | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                                |
| - | ------------------------------------- | --------------- | ---------------------------------- | --------------- | ---------------------------------------------------------- |
| 1 | \[2.25 Savepoints / Nested TX]        | `tx_savepoints` | ‚Üí \[2.7 Transaction Manager]       | `tx_manager`    | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥—É—Ä–æ–≤–Ω—è–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏                          |
| 2 | \[2.25 Savepoints / Nested TX]        | `tx_savepoints` | ‚Üí \[2.1 MVCC / Snapshot Isolation] | `mvcc_snapshot` | –°–æ–∑–¥–∞–Ω–∏–µ –∏ –æ—Ç–∫–∞—Ç —á–∞—Å—Ç–∏—á–Ω—ã—Ö —Å–Ω–∞–ø—à–æ—Ç–æ–≤                       |
| 3 | \[2.25 Savepoints / Nested TX]        | `tx_savepoints` | ‚Üí \[2.6 Lock Manager]              | `lock_manager`  | –ö–æ–Ω—Ç—Ä–æ–ª—å –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –Ω–∞ —É—Ä–æ–≤–Ω–µ savepoint                    |
| 4 | \[3.5 Procedure Engine / DSL Runtime] | `dsl_engine`    | ‚Üê \[2.25 Savepoints / Nested TX]   | `tx_savepoints` | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å–ª–æ–∂–Ω—ã—Ö —Ö—Ä–∞–Ω–∏–º—ã—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä–∞—Ö                 |
| 5 | \[6.2 Audit / Security / Policy]      | `audit_engine`  | ‚Üê \[2.25 Savepoints / Nested TX]   | `tx_savepoints` | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ `SAVEPOINT`, `ROLLBACK TO`, –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π |

---

### üîÅ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏:

| ‚Ññ | –û—Ç–∫—É–¥–∞ (`[–ë–ª–æ–∫]`)                     | ID –±–ª–æ–∫–∞            | ‚Üí –ö—É–¥–∞ (`[2.25 Savepoints / Nested TX]`) | ID –±–ª–æ–∫–∞        | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                                     |
| - | ------------------------------------- | ------------------- | ---------------------------------------- | --------------- | --------------------------------------------------------------- |
| 1 | \[2.7 Transaction Manager]            | `tx_manager`        | ‚Üí \[2.25 Savepoints / Nested TX]         | `tx_savepoints` | –î–µ–ª–µ–≥–∏—Ä—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ savepoint / rollback to savepoint           |
| 2 | \[3.5 Procedure Engine / DSL Runtime] | `dsl_engine`        | ‚Üí \[2.25 Savepoints / Nested TX]         | `tx_savepoints` | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–π TX             |
| 3 | \[6.3 Access Policy Engine]           | `access_policy`     | ‚Üí \[2.25 Savepoints / Nested TX]         | `tx_savepoints` | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –∏ rollback                           |
| 4 | \[2.1 MVCC / Snapshot Isolation]      | `mvcc_snapshot`     | ‚Üí \[2.25 Savepoints / Nested TX]         | `tx_savepoints` | –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –ø–æ–¥-—Å–Ω–∞–ø—à–æ—Ç–∞–º–∏                  |
| 5 | \[10.9 Savepoint / Nested TX Tests]   | `testing_savepoint` | ‚Üí \[2.25 Savepoints / Nested TX]         | `tx_savepoints` | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö TX, partial rollback, –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π |

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 25/25 —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏:

* **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**: —É—Ç–≤–µ—Ä–¥–∏–ª –∏–∑–æ–ª—è—Ü–∏—é —É—Ä–æ–≤–Ω–µ–π savepoint.
* **–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –°–£–ë–î**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å SQL:2011 –∏ PL/SQL –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º.
* **–ò–Ω–∂–µ–Ω–µ—Ä –ø–æ MVCC**: –ø—Ä–æ–≤–µ—Ä–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ü–µ–ø–æ—á–µ–∫ –ø—Ä–∏ —á–∞—Å—Ç–∏—á–Ω–æ–º –æ—Ç–∫–∞—Ç–µ.
* **–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: –ø—Ä–æ–≤–µ—Ä–∏–ª –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ rollback actions.
* **–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫ –°–£–ë–î**: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏.

---

‚úÖ –ë–ª–æ–∫ \[2.25] (`tx_savepoints`) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω.

