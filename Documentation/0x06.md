# üß¨ –ë–ª–æ–∫ 0.6 ‚Äî –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —É—Ä–æ–≤–Ω—è SAP HANA+

---

## üÜî –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –±–ª–æ–∫–∞

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ó–Ω–∞—á–µ–Ω–∏–µ                            |
| --------- | ----------------------------------- |
| üì¶ –ü–∞–∫–µ—Ç  | 0 ‚Äî –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–π —Å—Ç–∞—Ä—Ç |
| üî¢ –ë–ª–æ–∫   | 0.6 ‚Äî –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —É—Ä–æ–≤–Ω—è SAP HANA+  |

---

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ë–ª–æ–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç **–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä—ã –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –∑—Ä–µ–ª–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã**, —Ä–∞–≤–Ω—ã–π –∏–ª–∏ –ø—Ä–µ–≤—ã—à–∞—é—â–∏–π **SAP HANA**, –≤–∫–ª—é—á–∞—è:

* –ü–æ–ª–Ω—É—é in-memory –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É,
* HTAP-–Ω–∞–≥—Ä—É–∑–∫—É,
* –†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ,
* –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å (UDF/UDAF),
* Failover/Recovery,
* BI –∏ ML-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏,
* Observability, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å.

–≠—Ç–æ **–º–µ—Ç–∞-–±–ª–æ–∫**, –∫–æ—Ç–æ—Ä—ã–π —Å–≤—è–∑—ã–≤–∞–µ—Ç –≤—Å–µ —É—Ä–æ–≤–Ω–∏ —Å–∏—Å—Ç–µ–º—ã –≤ –µ–¥–∏–Ω—É—é —Ü–µ–ª–æ—Å—Ç–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è.

---

## ‚öôÔ∏è –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

| –ü–æ–¥—Å–∏—Å—Ç–µ–º–∞           | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è / –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏                                                       |
| -------------------- | ------------------------------------------------------------------------------ |
| –•—Ä–∞–Ω–∏–ª–∏—â–µ            | Row + Column Store, NUMA-aware, Adaptive Indexing, Compression, Tiered Storage |
| –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏           | MVCC, Snapshot Isolation, WAL + Snapshots + Instant Recovery                   |
| SQL –∏ –Ø–∑—ã–∫–∏          | ANSI SQL:2011+, JSON, UDF/UDAF, DSL/PL/SQL, –æ–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏                    |
| –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å        | UDF –Ω–∞ Lua/WASM/C, REST/gRPC/CLI, PostgreSQL wire protocol                     |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å         | RBAC/ABAC, Row-Level Security, TDE, scoped tokens, –∞—É–¥–∏—Ç                       |
| Observability        | OpenTelemetry, Prometheus, –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤—â–∏–∫, —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤      |
| ML/BI                | –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π SQL-–∏–Ω—Ñ–µ—Ä–µ–Ω—Å, ONNX, Time Series, Materialized Views, OLAP pipeline  |
| DevOps/–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å | CI/CD, fault injection, hot-reload, mutation/fuzz/soak test, Web UI            |

---

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ C

| –ò–º—è —Ñ—É–Ω–∫—Ü–∏–∏          | –ü—Ä–æ—Ç–æ—Ç–∏–ø                                         | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                 |
| -------------------- | ------------------------------------------------ | -------------------------- |
| `db_initialize()`    | `bool db_initialize(void)`                       | –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –ø–æ–¥—Å–∏—Å—Ç–µ–º —è–¥—Ä–∞ |
| `db_shutdown()`      | `void db_shutdown(void)`                         | –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã          |
| `planner_optimize()` | `plan_t *planner_optimize(ast_t *)`              | Cost-based –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ    |
| `mvcc_tx_begin()`    | `tx_t *mvcc_tx_begin(db_t *, isolation_level_t)` | –ù–∞—á–∞–ª–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏          |
| `udf_register()`     | `bool udf_register(const char *name, udf_fn fn)` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è UDF            |
| `metrics_start()`    | `void metrics_start(void)`                       | –ó–∞–ø—É—Å–∫ –ø–æ–¥—Å–∏—Å—Ç–µ–º—ã –º–µ—Ç—Ä–∏–∫   |

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞                       | –ò—Å—Ç–æ—á–Ω–∏–∫                    | –¶–µ–ª—å     |
| ----------------------------- | --------------------------- | -------- |
| `feature_coverage_ratio`      | –ú–æ–¥—É–ª—å —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å SAP HANA | 100%     |
| `latency_critical_ns`         | –ó–∞–ø—Ä–æ—Å—ã SELECT/INSERT       | < 500 –Ω—Å |
| `recovery_time_ms`            | WAL + Snapshot Recovery     | < 50 –º—Å  |
| `udf_runtime_latency_ns`      | –í—ã–∑–æ–≤ Lua/UDF               | < 1 –º—Å   |
| `query_telemetry_trace_ratio` | –ó–∞–ø—Ä–æ—Å—ã —Å —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–æ–π      | > 95%    |

---

## üìÇ –°–≤—è–∑–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏ –∫–æ–¥–∞

```
src/main.c
src/db.c
src/mvcc.c
src/wal.c
src/optimizer.c
src/executor.c
src/udf.c
src/metrics.c
src/rest_api.c
src/planner.c
src/replication.c
src/sandbox.c
include/db.h
include/udf.h
include/optimizer.h
include/replication.h
```

---

## üß† –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

* –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: `Parser ‚Üí Planner ‚Üí Optimizer ‚Üí Executor ‚Üí Storage`
* –ú–æ–¥—É–ª–∏ ‚â§ 500 —Å—Ç—Ä–æ–∫, `*.internal/` –¥–ª—è —Å–∫—Ä—ã—Ç–æ–π –ª–æ–≥–∏–∫–∏
* NUMA-aware allocation, prefetch, CPU pinning
* Full snapshot isolation + compressed MVCC chain
* Instant rollback, live reload, copy-on-write snapshot
* Flamegraph + OpenTelemetry + metrics server

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

| –í–∏–¥ —Ç–µ—Å—Ç–∞   | –ü–æ–∫—Ä—ã—Ç–∏–µ —Å–∏—Å—Ç–µ–º—ã                       | –ì–¥–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω             |
| ----------- | -------------------------------------- | -------------------------- |
| Integration | –í—Å–µ —ç—Ç–∞–ø—ã –∏ –º–æ–¥—É–ª–∏ —è–¥—Ä–∞                | `tests/integration/*.c`    |
| Fuzz        | Parser, planner, SQL DSL               | `fuzz/fuzz_sql_*.c`        |
| Soak        | –î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ —Å —Ä–µ—Å—Ç–∞—Ä—Ç–∞–º–∏   | `tests/soak/full_load.c`   |
| Mutation    | AST/Plan/Storage level fault-injection | `tests/mutation/*`         |
| CI/CD       | GitHub Actions, Ninja, Gcov/Lcov       | `.github/workflows/ci.yml` |

---

## üìê UML ‚Äî –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —è–¥—Ä–∞ —É—Ä–æ–≤–Ω—è SAP HANA+

```plantuml
@startuml
package "Core Engine" {
  [MVCC] --> [WAL]
  [Planner] --> [Optimizer]
  [Optimizer] --> [Executor]
  [Executor] --> [Storage]
  [Storage] --> [Column Store]
  [Storage] --> [Row Store]
}
package "Extension & Observability" {
  [UDF Engine]
  [REST API]
  [Metrics / OTel]
  [Profiler]
}
[UDF Engine] --> [Executor]
[Profiler] --> [Executor]
[REST API] --> [Executor]
@enduml
```

---

## ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ SAP HANA+

| –ö—Ä–∏—Ç–µ—Ä–∏–π             | –û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                                |
| -------------------- | ------ | ------------------------------------------ |
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ HTAP     | 100    | OLTP + OLAP pipeline                       |
| –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å        | 100    | Lua, WASM, REST, gRPC, PostgreSQL protocol |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å         | 95     | RBAC, TLS, –∞—É–¥–∏—Ç, —Ç–æ–∫–µ–Ω—ã                   |
| DevOps/Observability | 95     | –ú–µ—Ç—Ä–∏–∫–∏, —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞, –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∫–∞         |
| Failover / Recovery  | 90     | WAL + snapshot, RAFT                       |

---

## üìé –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞

```c
db_initialize();
planner_optimize(ast);
executor_run_sql(session, query);
metrics_start();
db_shutdown();
```

---

## üìå –°–≤—è–∑—å —Å –±–∏–∑–Ω–µ—Å-—Ñ—É–Ω–∫—Ü–∏—è–º–∏

* –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç **—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é –ø–æ–ª–Ω–æ—Ç—É** –¥–ª—è –∑–∞–º–µ–Ω—ã SAP HANA –≤ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö
* –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å BI, ML, ETL, REST API, –≤–Ω–µ—à–Ω–∏–º–∏ DSL
* –ó–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
