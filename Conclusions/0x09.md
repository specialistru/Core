üìê **–≠–∫—Å–ø–µ—Ä—Ç ‚Ññ9 ‚Äî –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ (Query Planner)**

---

### üéØ –û–±–ª–∞—Å—Ç—å –∞—É–¥–∏—Ç–∞:

* –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: cost-based, rule-based, adaptive
* –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–±–æ—Ä –ø–ª–∞–Ω–∞: join reorder, cardinality estimates
* –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–≥—Ä–µ–≥–∞—Ç–æ–≤, –∏–Ω–¥–µ–∫—Å–æ–≤, projection pushdown
* –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è OLTP/OLAP, materialized views
* –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å execution engine, stats collector

---

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `sap_hana_architecture_19.puml`:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç            | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                                                           |
| -------------------- | --------------------------------------------------------------------- |
| `sql_optimizer`      | –Ø–≤–Ω–æ –≤—ã–¥–µ–ª–µ–Ω, –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç core functionality –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏               |
| `plan_cache`         | –ï—Å—Ç—å –∫—ç—à –ø–ª–∞–Ω–æ–≤ ‚Äî –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è re-use –≤ HTAP-–Ω–∞–≥—Ä—É–∑–∫–∞—Ö                 |
| `jit_engine`         | –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–ª–∞–Ω—É –±—ã—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω—ã–º –≤ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π –∫–æ–¥ |
| `materialized_views` | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π ‚Äî –≤–∞–∂–Ω–æ –¥–ª—è OLAP              |
| `sql_executor`       | –ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –∑–Ω–∞—á–∏—Ç planner –Ω–µ standalone, –∞ —á–∞—Å—Ç—å –∫–æ–Ω–≤–µ–π–µ—Ä–∞         |

---

### ‚ö†Ô∏è –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ —Å–ª–∞–±—ã–µ –º–µ—Å—Ç–∞:

| –ü—Ä–æ–±–ª–µ–º–∞                        | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                                      |
| ------------------------------- | ---------------------------------------------------------------- |
| ‚ùå –ù–µ—Ç `plan_builder`            | –ù–µ—Ç –±–ª–æ–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ/—Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –ø–ª–∞–Ω–∞ (tree ‚Üí steps) |
| ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `stats_collector` | –ù–µ—Ç –º–æ–¥—É–ª—è –æ—Ü–µ–Ω–∫–∏ cardinality, selectivity, NDV                  |
| ‚ùå –ù–µ—Ç `rule_engine`             | Rule-based –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è, pushdown, projection pruning –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç |
| ‚ùå –ù–µ —É–∫–∞–∑–∞–Ω `adaptive_planner`  | Replanning –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∏–¥–±–µ–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç              |
| ‚ùå –ù–µ—Ç `index_advisor`           | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –∏–Ω–¥–µ–∫—Å–æ–≤ –Ω–µ –æ–ø–∏—Å–∞–Ω–∞         |

---

### üíØ –û—Ü–µ–Ω–∫–∞: **74 / 100**

---

### üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–æ—Ä–∞–±–æ—Ç–∫–µ:

1. **–î–æ–±–∞–≤–∏—Ç—å `plan_builder`** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∏ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –¥–µ—Ä–µ–≤–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
2. **–í–≤–µ—Å—Ç–∏ `stats_collector`** ‚Äî —Å–±–æ—Ä –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (histogram, NDV, rowcount)
3. **–î–æ–±–∞–≤–∏—Ç—å `rule_engine`** ‚Äî —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–ª–∞–Ω–∞: pushdown, filter merge, dedup
4. **–î–æ–±–∞–≤–∏—Ç—å `adaptive_planner`** ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–ª–∞–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ runtime —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
5. **–í–≤–µ—Å—Ç–∏ `index_advisor`** ‚Äî –ø–æ–¥—Å–∫–∞–∑–∫–∞ –∏ –æ—Ü–µ–Ω–∫–∞ –ø–æ–ª–µ–∑–Ω–æ—Å—Ç–∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤

---

üìê **–í—ã–≤–æ–¥:** –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –µ—Å—Ç—å, –Ω–æ –Ω–µ–¥–æ—Å—Ç–∞—ë—Ç –≤–∞–∂–Ω–µ–π—à–∏—Ö —Å–æ—Å—Ç–∞–≤–ª—è—é—â–∏—Ö ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏, rule engine, plan builder –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã—Ö –¥–ª—è SAP HANA –∏ PostgreSQL.

