# üå°Ô∏è –ë–ª–æ–∫ 1.12 ‚Äî –ì–æ—Ä—è—á–∏–µ / —Ö–æ–ª–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

---

## üÜî –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –±–ª–æ–∫–∞

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ó–Ω–∞—á–µ–Ω–∏–µ                         |
| --------- | -------------------------------- |
| üì¶ –ü–∞–∫–µ—Ç  | 1 ‚Äî –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –•—Ä–∞–Ω–∏–ª–∏—â–µ      |
| üî¢ –ë–ª–æ–∫   | 1.12 ‚Äî –ì–æ—Ä—è—á–∏–µ / —Ö–æ–ª–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ |

---

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–î–∞–Ω–Ω—ã–π –±–ª–æ–∫ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏—Ö "—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã" (—á–∞—Å—Ç–æ—Ç—ã –¥–æ—Å—Ç—É–ø–∞). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

* –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏–µ,
* –£–ø—Ä–∞–≤–ª—è—Ç—å –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–µ–π –∏ eviction'–æ–º,
* –í—ã—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∞–≤—Ç–æ-tiering –º–µ–∂–¥—É in-memory, SSD –∏ NVMe,
* –£—Å–∫–æ—Ä–∏—Ç—å OLTP/OLAP-–≤—ã–±–æ—Ä–∫–∏, –≤—ã–¥–µ–ª—è—è –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã.

---

## ‚öôÔ∏è –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

| –ü–æ–¥—Å–∏—Å—Ç–µ–º–∞           | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è / –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏                                    |
| -------------------- | ----------------------------------------------------------- |
| –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö | –ú–µ—Ç–∫–∏ HOT / WARM / COLD –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç—Ä–∞–Ω–∏—Ü, —Å—Ç—Ä–æ–∫, —Å–µ–≥–º–µ–Ω—Ç–æ–≤ |
| Temperature Tracking | –°–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞ (scan, update, join, read)          |
| Adaptive Tiering     | –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ COLD-–¥–∞–Ω–Ω—ã—Ö –Ω–∞ SSD, HOT ‚Äî —Ç–æ–ª—å–∫–æ –≤ RAM          |
| Access Heuristics    | –°—á—ë—Ç—á–∏–∫–∏ LRU, aging, eviction priority                      |
| TTL-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è       | Cold + TTL = candidates for eviction                        |

---

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ C

| –ò–º—è —Ñ—É–Ω–∫—Ü–∏–∏                 | –ü—Ä–æ—Ç–æ—Ç–∏–ø                                         | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                            |
| --------------------------- | ------------------------------------------------ | ------------------------------------- |
| `data_temp_init()`          | `void data_temp_init(void)`                      | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥—Å–∏—Å—Ç–µ–º—ã —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä   |
| `data_touch(page_t *pg)`    | `void data_touch(page_t *pg)`                    | –û—Ç–º–µ—Ç–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ            |
| `data_temperature(page_t*)` | `data_temp_t data_temperature(const page_t *pg)` | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã       |
| `data_tier_evict()`         | `void data_tier_evict(size_t target_pages)`      | –£–¥–∞–ª–µ–Ω–∏–µ / —Å–±—Ä–æ—Å —Ö–æ–ª–æ–¥–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü     |
| `data_promote(page_t *pg)`  | `void data_promote(page_t *pg)`                  | –ü–æ–¥–Ω—è—Ç–∏–µ —Ö–æ–ª–æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–æ –≥–æ—Ä—è—á–µ–π |

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞                     | –ò—Å—Ç–æ—á–Ω–∏–∫        | –¶–µ–ª—å            |
| --------------------------- | --------------- | --------------- |
| `hot_data_ratio`            | Temp Analyzer   | ‚â• 10%           |
| `cold_data_evicted_per_sec` | Eviction Engine | > 10k/—Å–µ–∫       |
| `page_temperature_skew`     | Cache Stats     | ‚â§ 20% –¥–∏—Å–±–∞–ª–∞–Ω—Å |
| `tier_migration_latency_ms` | Tiering Log     | < 3 –º—Å          |
| `hot_data_avg_ttl_sec`      | Access Logs     | ‚â• 600 —Å–µ–∫       |

---

## üìÇ –°–≤—è–∑–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏ –∫–æ–¥–∞

```
src/data_temp.c
src/tiering.c
src/page_metadata.c
include/data_temp.h
```

---

## üß† –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

* –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è lightweight atomic-—Å—á—ë—Ç—á–∏–∫–∏ –Ω–∞ page-level
* –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è aging + decay, —á—Ç–æ–±—ã "–æ—Ö–ª–∞–∂–¥–∞—Ç—å" —Ä–µ–¥–∫–æ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
* "Promotion" cold ‚Üí hot –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Å–ª–µ N –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö access
* TTL-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–¥–∞–ª—è—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ cold-—Å—Ç—Ä–∞–Ω–∏—Ü—ã –±–µ–∑ –Ω–∞–≥—Ä—É–∑–∫–∏

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

| –í–∏–¥ —Ç–µ—Å—Ç–∞ | –ú–µ—Ç–æ–¥–∏–∫–∞ / –ø–æ–∫—Ä—ã—Ç–∏–µ                      | –ì–¥–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω                 |
| --------- | ---------------------------------------- | ------------------------------ |
| Unit      | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏, –º–µ—Ç–æ–∫ HOT/COLD   | `tests/data_temp/test_class.c` |
| Perf      | –ò–∑–º–µ—Ä–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –∏ eviction throughput | `bench/tiering_bench.c`        |
| Fuzz      | –†–∞–Ω–¥–æ–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –∏ TTL      | `fuzz/fuzz_tiering.c`          |
| Soak      | –ù–µ–¥–µ–ª—å–Ω—ã–π —Ä–µ–∂–∏–º OLTP + OLAP –Ω–∞–≥—Ä—É–∑–æ–∫     | `tests/soak/data_migration.c`  |

---

## üìê UML ‚Äî –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∏ Tiered Manager

```plantuml
@startuml
class Page {
  +access()
  +temperature
}

class TierManager {
  +evict_cold()
  +promote_hot()
}

Page --> TierManager : notify_access
@enduml
```

---

## ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ SAP HANA+

| –ö—Ä–∏—Ç–µ—Ä–∏–π                    | –û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                      |
| --------------------------- | ------ | -------------------------------- |
| –ü–æ–¥–¥–µ—Ä–∂–∫–∞ HOT/WARM/COLD     | 100    | –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∏ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ |
| –ê–≤—Ç–æ-tiering + SSD fallback | 90     | –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ, –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫  |
| TTL-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è              | 95     | Cold + TTL = –∞–≤—Ç–æ-—É–¥–∞–ª–µ–Ω–∏–µ       |

---

## üìé –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞

```c
page_t *pg = page_fetch(id, true);
data_touch(pg);  // —Ñ–∏–∫—Å–∏—Ä—É–µ–º –¥–æ—Å—Ç—É–ø
if (data_temperature(pg) == TEMP_COLD) {
    data_promote(pg); // –¥–µ–ª–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –≥–æ—Ä—è—á–µ–π
}
```

---

## üìå –°–≤—è–∑—å —Å –±–∏–∑–Ω–µ—Å-—Ñ—É–Ω–∫—Ü–∏—è–º–∏

* –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç SLA –≤ high-throughput —Ä–µ–∂–∏–º–∞—Ö
* –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ö–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
* –ü–æ–≤—ã—à–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏
