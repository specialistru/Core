üîó **–°–≤—è–∑–∏ –¥–ª—è –±–ª–æ–∫–∞ `2.3 WAL-–∂—É—Ä–Ω–∞–ª` (`wal_manager`)**
üì¶ –ü–∞–∫–µ—Ç: `2. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å –∏ –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å`

---

### üîª –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏ (`wal_manager --> X`)

| –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ                             | –¶–µ–ª–µ–≤–æ–π –±–ª–æ–∫                         | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| --------------------------------------- | ------------------------------------ | ---------- |
| `wal_manager --> wal_writer`            | –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ WAL-–±—ç–∫–µ–Ω–¥    |            |
| `wal_manager --> crash_recovery`        | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ WAL-–∑–∞–ø–∏—Å—è–º        |            |
| `wal_manager --> recovery_service`      | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å recovery-–º–µ–Ω–µ–¥–∂–µ—Ä–æ–º     |            |
| `wal_manager --> gc_vacuum`             | –£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö WAL-–∑–∞–ø–∏—Å–µ–π      |            |
| `wal_manager --> buffer_pool`           | –°–±—Ä–æ—Å dirty pages –≤ WAL –ø—Ä–∏ eviction |            |
| `wal_manager --> ttl_eviction`          | –õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã—Ç–µ—Å–Ω–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫       |            |
| `wal_manager --> compression_engine`    | –°–∂–∞—Ç–∏–µ –ª–æ–≥–æ–≤ (log compaction)        |            |
| `wal_manager --> cold_storage_fallback` | –ê—Ä—Ö–∏–≤–∞—Ü–∏—è –ª–æ–≥–æ–≤ –≤ SSD                |            |
| `wal_manager --> failover_engine`       | –†–µ–ø–ª–∏–∫–∞—Ü–∏—è WAL –≤ –ø–∞—Å—Å–∏–≤–Ω—ã–π —É–∑–µ–ª      |            |
| `wal_manager --> replication`           | –¢—Ä–∞–Ω—Å–ª—è—Ü–∏—è WAL –¥–ª—è Raft/Paxos-—Ä–µ–ø–ª–∏–∫ |            |

---

### üî∫ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏ (`X --> wal_manager`)

| –ò—Å—Ç–æ—á–Ω–∏–∫                           | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                          |
| ---------------------------------- | ----------------------------------- |
| `mvcc_engine --> wal_manager`      | –ó–∞–ø–∏—Å—å –≤–µ—Ä—Å–∏–π –≤ –∂—É—Ä–Ω–∞–ª –ø—Ä–∏ DML      |
| `txn_manager --> wal_manager`      | –ù–∞—á–∞–ª–æ/–∫–æ–º–º–∏—Ç/–æ—Ç–∫–∞—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏      |
| `sql_executor --> wal_manager`     | –ü—Ä–æ—Ç–æ–∫–æ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ |
| `snapshot_manager --> wal_manager` | –§–∏–∫—Å–∞—Ü–∏—è snapshot –∫–∞–∫ checkpoint    |
| `udf_engine --> wal_manager`       | –°–∏—Å—Ç–µ–º–Ω—ã–µ UDF —Å –ø–æ–±–æ—á–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏ |
| `etl_engine --> wal_manager`       | –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ –∂—É—Ä–Ω–∞–ª–∏—Ä—É—é—Ç—Å—è  |
| `config_loader --> wal_manager`    | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: —Ä–∞–∑–º–µ—Ä, –ø—É—Ç—å, retention  |

---

### üß© –í—Å–µ–≥–æ —Å–≤—è–∑–µ–π: **17**

* –ò—Å—Ö–æ–¥—è—â–∏–µ: **10**
* –í—Ö–æ–¥—è—â–∏–µ: **7**

---

‚úÖ `2.3 WAL-–∂—É—Ä–Ω–∞–ª` ‚Äî –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ **–¥–æ–ª–≥–æ–≤–µ—á–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö (durability)**, **–∞–≤–∞—Ä–∏–π–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ**, **–ª–æ–≥–∏—á–µ—Å–∫—É—é —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é**, –∞ —Ç–∞–∫–∂–µ **–ø–æ–¥–¥–µ—Ä–∂–∫—É –≥–æ—Ä—è—á–∏—Ö —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π**.
–ü–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–∞–∫ delta-WAL, —Ç–∞–∫ –∏ multi-stream –∂—É—Ä–Ω–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–æ–º.
