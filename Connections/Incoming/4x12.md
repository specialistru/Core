üîó **–°–≤—è–∑–∏ –¥–ª—è –±–ª–æ–∫–∞ `4.12 Raft / Consensus Engine` (`raft_engine`)**
üì¶ –ü–∞–∫–µ—Ç: `4. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏`

---

### üîª –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏ (`raft_engine --> X`)

| –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ                           | –¶–µ–ª–µ–≤–æ–π –±–ª–æ–∫                                    | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| ------------------------------------- | ----------------------------------------------- | ---------- |
| `raft_engine --> replication`         | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Å–µ–Ω—Å—É—Å–∞ –≤ –º–µ—Ö–∞–Ω–∏–∑–º–µ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏    |            |
| `raft_engine --> failover_engine`     | –í—ã–±–æ—Ä –ª–∏–¥–µ—Ä–∞ –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏—è –Ω–æ–¥—ã                   |            |
| `raft_engine --> crash_recovery`      | –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ –∂—É—Ä–Ω–∞–ª—É         |            |
| `raft_engine --> wal_manager`         | –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π WAL –º–µ–∂–¥—É —É–∑–ª–∞–º–∏        |            |
| `raft_engine --> snapshot_manager`    | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —Å–Ω–∏–º–∫–æ–≤ –º–µ–∂–¥—É –ª–∏–¥–µ—Ä–æ–º –∏ —Ñ–æ–ª–ª–æ–≤–µ—Ä–∞–º–∏ |            |
| `raft_engine --> recovery_service`    | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Å–ª–µ failover         |            |
| `raft_engine --> ci_cd_runner`        | –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä         |            |
| `raft_engine --> structured_logger`   | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –∫–æ–Ω—Å–µ–Ω—Å—É—Å–∞       |            |
| `raft_engine --> tracing_agent`       | –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ Raft-—Å–æ–æ–±—â–µ–Ω–∏–π –∏ heartbeat'–æ–≤       |            |
| `raft_engine --> prometheus_exporter` | –ú–µ—Ç—Ä–∏–∫–∏ Raft-—Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ —Ä–æ–ª–µ–π                  |            |
| `raft_engine --> plugin_loader`       | –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –∫–æ–Ω—Å–µ–Ω—Å—É—Å–∞ |            |
| `raft_engine --> etl_engine`          | –†–µ–ø–ª–∏–∫–∞—Ü–∏—è ETL-—Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –∏ –ø–∞–π–ø–ª–∞–π–Ω–æ–≤           |            |
| `raft_engine --> access_control`      | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –ø—Ä–∞–≤ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ (RBAC sync)       |            |

---

### üî∫ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏ (`X --> raft_engine`)

| –ò—Å—Ç–æ—á–Ω–∏–∫                          | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                    |
| --------------------------------- | --------------------------------------------- |
| `replication --> raft_engine`     | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Raft –∫–∞–∫ backend –ø—Ä–æ—Ç–æ–∫–æ–ª       |
| `etl_engine --> raft_engine`      | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ            |
| `plugin_loader --> raft_engine`   | –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–≤–∏–∂–∫–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏ |
| `cli_shell --> raft_engine`       | –ó–∞–ø—Ä–æ—Å —Ä–æ–ª–µ–π/—Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–Ω—Å–µ–Ω—Å—É—Å–∞             |
| `config_loader --> raft_engine`   | –ó–∞–≥—Ä—É–∑–∫–∞ quorum-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ initial peers    |
| `failover_engine --> raft_engine` | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è         |

---

### üß© –í—Å–µ–≥–æ —Å–≤—è–∑–µ–π: **19**

* –ò—Å—Ö–æ–¥—è—â–∏–µ: **13**
* –í—Ö–æ–¥—è—â–∏–µ: **6**

---

‚úÖ –ë–ª–æ–∫ `4.12 Raft / Consensus Engine` ‚Äî —è–¥—Ä–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –°–£–ë–î. –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é write-ahead –ª–æ–≥–æ–≤, –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –∞–∫—Ç–∏–≤–Ω—É—é —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é –º–µ–∂–¥—É –Ω–æ–¥–∞–º–∏ –≤ —Ä–µ–∂–∏–º–µ **active-active** –∏–ª–∏ **active-passive**.

üìå **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç heartbeat, vote –∏ log replication –º–µ—Ö–∞–Ω–∏–∑–º—ã.
* –°–≤—è–∑–∞–Ω –∫–∞–∫ —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º, —Ç–∞–∫ –∏ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –ø–∞–π–ø–ª–∞–π–Ω–∞–º–∏.
