üîó **–°–≤—è–∑–∏ –¥–ª—è –±–ª–æ–∫–∞ `2.2 –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–Ω–∏–º–∫–æ–≤` (`snapshot_manager`)**
üì¶ –ü–∞–∫–µ—Ç: `2. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å –∏ –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å`

---

### üîª –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏ (`snapshot_manager --> X`)

| –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ                             | –¶–µ–ª–µ–≤–æ–π –±–ª–æ–∫                                         | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| --------------------------------------- | ---------------------------------------------------- | ---------- |
| `snapshot_manager --> mvcc_engine`      | –ü–µ—Ä–µ–¥–∞—á–∞ snapshot visibility (TID ‚Üí version chain)   |            |
| `snapshot_manager --> isolation_levels` | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ snapshot –∏–∑–æ–ª—è—Ü–∏–∏                         |            |
| `snapshot_manager --> versioned_tables` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º SYSTEM VERSIONED —Ç–∞–±–ª–∏—Ü        |            |
| `snapshot_manager --> recovery_service` | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ snapshot –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏            |            |
| `snapshot_manager --> column_store`     | Snapshot-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ                |            |
| `snapshot_manager --> buffer_pool`      | –ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ snapshot –≤ –ø–∞–º—è—Ç–∏                        |            |
| `snapshot_manager --> instant_snapshot` | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ |            |
| `snapshot_manager --> analytic_engine`  | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ snapshot               |            |
| `snapshot_manager --> etl_engine`       | –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–Ω–∏–º–∫–∞                      |            |
| `snapshot_manager --> plan_cache`       | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞–Ω–æ–≤ –Ω–∞ snapshot-–¥–∞–Ω–Ω—ã—Ö                |            |

---

### üî∫ –í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏ (`X --> snapshot_manager`)

| –ò—Å—Ç–æ—á–Ω–∏–∫                              | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                  |
| ------------------------------------- | ------------------------------------------- |
| `txn_manager --> snapshot_manager`    | –ü–æ–ª—É—á–µ–Ω–∏–µ snapshot –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏    |
| `sql_executor --> snapshot_manager`   | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏               |
| `mvcc_engine --> snapshot_manager`    | –ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è snapshot –ø—Ä–∏ DML               |
| `config_loader --> snapshot_manager`  | –í–∫–ª—é—á–µ–Ω–∏–µ snapshot-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏         |
| `schema_evolver --> snapshot_manager` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º–æ–π —á–µ—Ä–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–æ—á–∫–∏     |
| `dsl_engine --> snapshot_manager`     | DSL-—Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è snapshot-–∑–∞–ø—Ä–æ—Å–æ–≤ (`AS OF`) |

---

### üß© –í—Å–µ–≥–æ —Å–≤—è–∑–µ–π: **16**

* –ò—Å—Ö–æ–¥—è—â–∏–µ: **10**
* –í—Ö–æ–¥—è—â–∏–µ: **6**

---

‚úÖ `2.2 –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–Ω–∏–º–∫–æ–≤` ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω –¥–ª—è snapshot isolation, –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ `AS OF`, –º–≥–Ω–æ–≤–µ–Ω–Ω—ã—Ö —Å–Ω–∏–º–∫–æ–≤ (`instant clone`) –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏.
–ü–æ–∑–≤–æ–ª—è–µ—Ç –∫–∞–∫ –≤—ã–ø–æ–ª–Ω—è—Ç—å OLAP-–∑–∞–ø—Ä–æ—Å—ã –Ω–∞ consistent snapshot, —Ç–∞–∫ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –∫ –ø—Ä–æ—à–ª—ã–º –≤–µ—Ä—Å–∏—è–º —Ç–∞–±–ª–∏—Ü –∏ —Å—Ö–µ–º.
